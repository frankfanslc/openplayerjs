!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.OpenPlayer=t():e.OpenPlayer=t()}(this,(function(){return(()=>{var e={228:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n},e.exports.default=e.exports,e.exports.__esModule=!0},858:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},506:e=>{e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},575:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},913:e=>{function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e},e.exports.default=e.exports,e.exports.__esModule=!0},754:e=>{function t(i){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,t(i)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},205:(e,t,i)=>{var n=i(489);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},884:e=>{e.exports=function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,s,a=[],r=!0,o=!1;try{for(i=i.call(e);!(r=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);r=!0);}catch(e){o=!0,s=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw s}}return a}},e.exports.default=e.exports,e.exports.__esModule=!0},521:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},585:(e,t,i)=>{var n=i(8).default,s=i(506);e.exports=function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)},e.exports.default=e.exports,e.exports.__esModule=!0},489:e=>{function t(i,n){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,t(i,n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},38:(e,t,i)=>{var n=i(858),s=i(884),a=i(379),r=i(521);e.exports=function(e,t){return n(e)||s(e,t)||a(e,t)||r()},e.exports.default=e.exports,e.exports.__esModule=!0},8:e=>{function t(i){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(i)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},379:(e,t,i)=>{var n=i(228);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},553:e=>{var t=function(e){"use strict";var t,i=Object.prototype,n=i.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",r=s.asyncIterator||"@@asyncIterator",o=s.toStringTag||"@@toStringTag";function f(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,i){return e[t]=i}}function l(e,t,i,n){var s=t&&t.prototype instanceof m?t:m,a=Object.create(s.prototype),r=new C(n||[]);return a._invoke=function(e,t,i){var n=u;return function(s,a){if(n===d)throw new Error("Generator is already running");if(n===p){if("throw"===s)throw a;return O()}for(i.method=s,i.arg=a;;){var r=i.delegate;if(r){var o=L(r,i);if(o){if(o===v)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===u)throw n=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var f=c(e,t,i);if("normal"===f.type){if(n=i.done?p:h,f.arg===v)continue;return{value:f.arg,done:i.done}}"throw"===f.type&&(n=p,i.method="throw",i.arg=f.arg)}}}(e,i,r),a}function c(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function m(){}function g(){}function y(){}var b={};f(b,a,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(x([])));w&&w!==i&&n.call(w,a)&&(b=w);var k=y.prototype=m.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function i(s,a,r,o){var f=c(e[s],e,a);if("throw"!==f.type){var l=f.arg,u=l.value;return u&&"object"==typeof u&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){i("next",e,r,o)}),(function(e){i("throw",e,r,o)})):t.resolve(u).then((function(e){l.value=e,r(l)}),(function(e){return i("throw",e,r,o)}))}o(f.arg)}var s;this._invoke=function(e,n){function a(){return new t((function(t,s){i(e,n,t,s)}))}return s=s?s.then(a,a):a()}}function L(e,i){var n=e.iterator[i.method];if(n===t){if(i.delegate=null,"throw"===i.method){if(e.iterator.return&&(i.method="return",i.arg=t,L(e,i),"throw"===i.method))return v;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var s=c(n,e.iterator,i.arg);if("throw"===s.type)return i.method="throw",i.arg=s.arg,i.delegate=null,v;var a=s.arg;return a?a.done?(i[e.resultName]=a.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,v):a:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,v)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function x(e){if(e){var i=e[a];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,r=function i(){for(;++s<e.length;)if(n.call(e,s))return i.value=e[s],i.done=!1,i;return i.value=t,i.done=!0,i};return r.next=r}}return{next:O}}function O(){return{value:t,done:!0}}return g.prototype=y,f(k,"constructor",y),f(y,"constructor",g),g.displayName=f(y,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,f(e,o,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},_(A.prototype),f(A.prototype,r,(function(){return this})),e.AsyncIterator=A,e.async=function(t,i,n,s,a){void 0===a&&(a=Promise);var r=new A(l(t,i,n,s),a);return e.isGeneratorFunction(i)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},_(k),f(k,o,"Generator"),f(k,a,(function(){return this})),f(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},e.values=x,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function s(n,s){return o.type="throw",o.arg=e,i.next=n,s&&(i.method="next",i.arg=t),!!s}for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a],o=r.completion;if("root"===r.tryLoc)return s("end");if(r.tryLoc<=this.prev){var f=n.call(r,"catchLoc"),l=n.call(r,"finallyLoc");if(f&&l){if(this.prev<r.catchLoc)return s(r.catchLoc,!0);if(this.prev<r.finallyLoc)return s(r.finallyLoc)}else if(f){if(this.prev<r.catchLoc)return s(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return s(r.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc<=this.prev&&n.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var a=s;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var r=a?a.completion:{};return r.type=e,r.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),T(i),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var s=n.arg;T(i)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(e,i,n){return this.delegate={iterator:x(e),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},757:(e,t,i)=>{e.exports=i(553)}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,i),a.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n={};return(()=>{"use strict";i.d({},{Z:()=>fs});var e=i(8),t=i.n(e),n=i(575),s=i.n(n),a=i(913),r=i.n(a),o=i(757),f=i.n(o),l=i(38),c=i.n(l),u="undefined"!=typeof window?window.navigator:null,h=u?u.userAgent.toLowerCase():null,d=(!!h&&(/ipad/i.test(h)&&window.MSStream),!!h&&(/iphone/i.test(h)&&!window.MSStream)),p=(!!h&&(/ipod/i.test(h)&&window.MSStream),!!h&&(/ipad|iphone|ipod/i.test(h)&&!window.MSStream)),v=!!h&&/android/i.test(h),m=!!h&&/(trident|microsoft)/i.test(u.appName),g=(!!u&&("msLaunchUri"in u&&document),!!h&&/chrome/i.test(h)),y=(!!h&&/firefox/i.test(h),!!h&&(/safari/i.test(h)&&!g)),b=(!!h&&/^mozilla\/\d+\.\d+\s\(linux;\su;/i.test(h),"undefined"!=typeof window&&"MediaSource"in window),E=!m&&{passive:!1};function w(e,t){var i={};return t&&t.detail&&(i={detail:t.detail}),new CustomEvent(e,i)}function k(e){return"video"===e.tagName.toLowerCase()}function _(e){return"audio"===e.tagName.toLowerCase()}function A(e){if(e){var t=e.parentNode;t&&t.removeChild(e)}}function L(e){return new Promise((function(t,i){var n=document.createElement("script");n.src=e,n.async=!0,n.onload=function(){A(n),t({})},n.onerror=function(){A(n),i(new Error("".concat(e," could not be loaded")))},document.head&&document.head.appendChild(n)}))}function M(e,t){return!!(e.className.split(" ").indexOf(t)>-1)}function T(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset||document.documentElement.scrollLeft),top:t.top+(window.pageYOffset||document.documentElement.scrollTop)}}function C(e,t){var i=Math.floor(e%1*(t||0)),n=Math.floor(e),s=Math.floor(n/60),a=Math.floor(s/60),r=function(e){return e<10?"0".concat(e):e};return s%=60,n%=60,"".concat(a>0?"".concat(r(a),":"):"").concat(r(s),":").concat(r(n)).concat(i?":".concat(r(i)):"")}function x(e){var t=e.replace(/;/g,":").split(":"),i=0;return 3===t.length?(i+=60*parseFloat(t[0])*60,i+=60*parseFloat(t[1]),i+=parseFloat(t[2])):(i+=60*parseFloat(t[0]),i+=parseFloat(t[1])),i}var O,P,S,W,j,R,N,I,D,B,F,q,H,z,V,U=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},K=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},G=function(){function e(t,i,n){s()(this,e),O.set(this,void 0),P.set(this,void 0),S.set(this,void 0),W.set(this,void 0),j.set(this,{button:{},global:{},media:{}}),R.set(this,{}),N.set(this,void 0),I.set(this,{}),D.set(this,void 0),B.set(this,void 0),F.set(this,"off"),q.set(this,void 0),H.set(this,void 0),z.set(this,void 0),V.set(this,void 0),U(this,O,t,"f"),U(this,H,t.getOptions().labels,"f"),U(this,q,t.getOptions().detachMenus,"f"),U(this,z,i,"f"),U(this,V,n,"f");for(var a=K(this,O,"f").getElement().textTracks,r=[],o=0,f=a.length;o<f;o++){var l=['track[kind="subtitles"][srclang="'.concat(a[o].language,'"][label="').concat(a[o].label,'"]'),'track[kind="captions"][srclang="'.concat(a[o].language,'"][label="').concat(a[o].label,'"]')];K(this,O,"f").getElement().querySelector(l.join(", "))&&r.push(a[o])}if(!r.length)for(var c=0,u=a.length;c<u;c++)r.push(a[c]);return U(this,N,r,"f"),U(this,D,!!K(this,N,"f").length,"f"),this}return r()(e,[{key:"create",value:function(){var e=this;if(K(this,D,"f")){U(this,P,document.createElement("button"),"f"),K(this,P,"f").className="op-controls__captions op-control__".concat(K(this,z,"f")),K(this,P,"f").tabIndex=0,K(this,P,"f").title=K(this,H,"f").toggleCaptions,K(this,P,"f").setAttribute("aria-controls",K(this,O,"f").id),K(this,P,"f").setAttribute("aria-pressed","false"),K(this,P,"f").setAttribute("aria-label",K(this,H,"f").toggleCaptions),K(this,P,"f").setAttribute("data-active-captions","off"),K(this,P,"f").innerHTML='<span class="op-sr">'.concat(K(this,H,"f").toggleCaptions,"</span>"),K(this,q,"f")&&(K(this,P,"f").classList.add("op-control--no-hover"),U(this,W,document.createElement("div"),"f"),K(this,W,"f").className="op-settings op-captions__menu",K(this,W,"f").setAttribute("aria-hidden","true"),K(this,W,"f").innerHTML='<div class="op-settings__menu" role="menu" id="menu-item-captions">\n                <div class="op-settings__submenu-item" tabindex="0" role="menuitemradio" aria-checked="'.concat("off"===K(this,F,"f")?"true":"false",'">\n                    <div class="op-settings__submenu-label op-subtitles__option" data-value="captions-off">').concat(K(this,H,"f").off,"</div>\n                </div>\n            </div>"));for(var t=function(t,i,n){var s,a,r=i[t];if("subtitles"===r.kind||"captions"===r.kind){r.default&&(U(e,F,r.srclang,"f"),K(e,P,"f").setAttribute("data-active-captions",r.srclang));var o=(s=r.src,(a=document.createElement("a")).href=s,a.href),f=K(e,N,"f")[t];f&&f.language===r.srclang&&(f.cues&&f.cues.length>0?(K(e,R,"f")[r.srclang]=e._getNativeCues(K(e,N,"f")[t]),e._prepareTrack(t,r.srclang,o,r.default||!1)):function(e,t,i,n){var s,a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");switch(t){case"text":s="text/plain";break;case"json":s="application/json, text/javascript";break;case"html":s="text/html";break;case"xml":s="application/xml, text/xml";break;default:s="application/x-www-form-urlencoded; charset=UTF-8"}var r=!1,o="application/x-www-form-urlencoded"!==s?"".concat(s,", */*; q=0.01"):"*/".concat("*");a&&(a.open("GET",e,!0),a.setRequestHeader("Accept",o),a.onreadystatechange=function(){if(!r&&4===a.readyState)if(200===a.status){var e;switch(r=!0,t){case"json":e=JSON.parse(a.responseText);break;case"xml":e=a.responseXML;break;default:e=a.responseText}i(e)}else"function"==typeof n&&n(a.status)},a.send())}(o,"text",(function(i){K(e,R,"f")[r.srclang]=e._getCuesFromText(i),e._prepareTrack(t,r.srclang,o,r.default||!1);var n='.op-subtitles__option[data-value="captions-'.concat(K(e,N,"f")[t].language,'"]');if(K(e,W,"f")&&!K(e,W,"f").querySelector(n)){var s=document.createElement("div");s.className="op-settings__submenu-item",s.tabIndex=0,s.setAttribute("role","menuitemradio"),s.setAttribute("aria-checked",K(e,F,"f")===K(e,N,"f")[t].language?"true":"false"),s.innerHTML='<div class="op-settings__submenu-label op-subtitles__option"\n                                        data-value="captions-'.concat(K(e,N,"f")[t].language,'">\n                                        ').concat(K(e,H,"f").lang[K(e,N,"f")[t].language]||K(e,N,"f")[t].label,"\n                                    </div>"),K(e,W,"f").appendChild(s)}})))}},i=0,n=K(this,O,"f").getElement().querySelectorAll("track"),s=n.length;i<s;i++)t(i,n);U(this,S,document.createElement("div"),"f"),K(this,S,"f").className="op-captions",K(this,S,"f").innerHTML="<span></span>";var a=K(this,S,"f").querySelector("span");if(K(this,j,"f").media.timeupdate=function(){if(K(e,O,"f").isMedia())if(K(e,B,"f")){var t=K(e,R,"f")[K(e,B,"f").language];if(a&&void 0!==t){var i=e._search(t,K(e,O,"f").getMedia().currentTime);a.innerHTML="",i>-1&&M(K(e,P,"f"),"op-controls__captions--on")?(K(e,S,"f").classList.add("op-captions--on"),a.innerHTML=e._sanitize(t[i].text)):e._hide()}}else e._hide();else e._hide()},K(this,j,"f").button.click=function(t){var i=t.target;if(K(e,q,"f")){for(var n=K(e,O,"f").getContainer().querySelectorAll(".op-settings"),s=0,a=n.length;s<a;++s)n[s]!==K(e,W,"f")&&n[s].setAttribute("aria-hidden","true");"true"===K(e,W,"f").getAttribute("aria-hidden")?K(e,W,"f").setAttribute("aria-hidden","false"):K(e,W,"f").setAttribute("aria-hidden","true")}else i.setAttribute("aria-pressed","true"),M(i,"op-controls__captions--on")?(e._hide(),i.classList.remove("op-controls__captions--on"),i.setAttribute("data-active-captions","off")):(K(e,B,"f")||U(e,B,K(e,N,"f")[0],"f"),e._show(),i.classList.add("op-controls__captions--on"),i.setAttribute("data-active-captions",K(e,B,"f").language))},K(this,j,"f").button.mouseover=function(){if(!p&&!v&&K(e,q,"f")){for(var t=K(e,O,"f").getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i]!==K(e,W,"f")&&t[i].setAttribute("aria-hidden","true");"true"===K(e,W,"f").getAttribute("aria-hidden")&&K(e,W,"f").setAttribute("aria-hidden","false")}},K(this,j,"f").button.mouseout=function(){if(!p&&!v&&K(e,q,"f")){for(var t=K(e,O,"f").getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i].setAttribute("aria-hidden","true");"false"===K(e,W,"f").getAttribute("aria-hidden")&&K(e,W,"f").setAttribute("aria-hidden","true")}},K(this,D,"f")){var r=K(this,O,"f").getContainer();if(r.insertBefore(K(this,S,"f"),r.firstChild),K(this,q,"f")){var o=document.createElement("div");o.className="op-controls__container op-control__".concat(K(this,z,"f")),o.appendChild(K(this,P,"f")),o.appendChild(K(this,W,"f")),K(this,O,"f").getControls().getLayer(K(this,V,"f")).appendChild(o)}else K(this,O,"f").getControls().getLayer(K(this,V,"f")).appendChild(K(this,P,"f"));K(this,P,"f").addEventListener("click",K(this,j,"f").button.click,E)}K(this,N,"f").length<=1&&!K(this,q,"f")||!K(this,N,"f").length&&K(this,q,"f")||(K(this,j,"f").global.click=function(t){var i=t.target;if(i.closest("#".concat(K(e,O,"f").id))&&M(i,"op-subtitles__option")){var n=i.getAttribute("data-value"),s=n?n.replace("captions-",""):"",a=Array.from(K(e,N,"f")).filter((function(e){return e.language===s}));if(U(e,B,a?a.pop():void 0,"f"),K(e,q,"f")){if(M(K(e,P,"f"),"op-controls__captions--on")?(e._hide(),K(e,P,"f").classList.remove("op-controls__captions--on"),K(e,P,"f").setAttribute("data-active-captions","off")):(e._show(),K(e,P,"f").classList.add("op-controls__captions--on"),K(e,P,"f").setAttribute("data-active-captions",s)),i.parentElement&&i.parentElement.parentElement)for(var r=i.parentElement.parentElement.querySelectorAll(".op-settings__submenu-item"),o=0,f=r.length;o<f;++o)r[o].setAttribute("aria-checked","false");i.parentElement&&i.parentElement.setAttribute("aria-checked","true"),K(e,W,"f").setAttribute("aria-hidden","false")}else e._show(),K(e,P,"f").setAttribute("data-active-captions",s);var l=w("captionschanged");K(e,O,"f").getElement().dispatchEvent(l)}},K(this,q,"f")&&(K(this,P,"f").addEventListener("mouseover",K(this,j,"f").button.mouseover,E),K(this,W,"f").addEventListener("mouseover",K(this,j,"f").button.mouseover,E),K(this,W,"f").addEventListener("mouseout",K(this,j,"f").button.mouseout,E),K(this,O,"f").getElement().addEventListener("controlshidden",K(this,j,"f").button.mouseout,E)),void 0!==K(this,j,"f").global.click&&document.addEventListener("click",K(this,j,"f").global.click,E))}}},{key:"destroy",value:function(){void 0!==K(this,j,"f").global.click&&document.removeEventListener("click",K(this,j,"f").global.click),K(this,D,"f")&&(K(this,P,"f").removeEventListener("click",K(this,j,"f").button.click),K(this,q,"f")&&(K(this,P,"f").removeEventListener("mouseover",K(this,j,"f").button.mouseover),K(this,W,"f").removeEventListener("mouseover",K(this,j,"f").button.mouseover),K(this,W,"f").removeEventListener("mouseout",K(this,j,"f").button.mouseout),K(this,O,"f").getElement().removeEventListener("controlshidden",K(this,j,"f").button.mouseout),A(K(this,W,"f"))),K(this,O,"f").getElement().removeEventListener("timeupdate",K(this,j,"f").media.timeupdate),A(K(this,P,"f")),A(K(this,S,"f")))}},{key:"addSettings",value:function(){if(K(this,q,"f")||K(this,N,"f").length<=1)return{};var e=this._formatMenuItems();return e.length>2?{className:"op-subtitles__option",default:K(this,F,"f")||"off",key:"captions",name:K(this,H,"f").captions,subitems:e}:{}}},{key:"_getCuesFromText",value:function(e){var i=e.split(/\r?\n/),n=[],s=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#/%?=~_|!:,.;]*[-A-Z0-9+&@#/%=~_|])/gi;var a,r=new RegExp("^((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\x3e ((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*?)$");function o(e){e="string"!=typeof e?JSON.stringify(e):e;try{e=JSON.parse(e)}catch(e){return!1}return"object"===t()(e)&&null!==e}for(var f=0,l=i.length;f<l;f++){var c=r.exec(i[f]);if(c&&f<i.length){f-1>=0&&""!==i[f-1]&&(a=i[f-1]);var u=i[++f];for(f++;""!==i[f]&&f<i.length;)u="".concat(u,"\n").concat(i[f]),f++;u=u.trim().replace(s,"<a href='$1' target='_blank'>$1</a>");var h=x(c[1]);n.push({endTime:x(c[3]),identifier:a||"",settings:o(c[5])?JSON.parse(c[5]):{},startTime:0===h?.2:h,text:u})}a=""}return n}},{key:"_getNativeCues",value:function(e){var t=[],i=e.cues;return Object.keys(i).forEach((function(e){var n=parseInt(e,10),s=i[n];t.push({endTime:s.endTime,identifier:s.id,settings:{},startTime:s.startTime,text:s.text})})),t}},{key:"_show",value:function(){if(K(this,S,"f")&&K(this,B,"f")&&void 0!==K(this,B,"f").cues){var e=K(this,S,"f").querySelector("span");e&&(e.innerHTML=""),K(this,O,"f").getElement().addEventListener("timeupdate",K(this,j,"f").media.timeupdate,E)}}},{key:"_hide",value:function(){K(this,S,"f").classList.remove("op-captions--on"),K(this,B,"f")||(K(this,P,"f").classList.remove("op-controls__captions--on"),K(this,P,"f").setAttribute("data-active-captions","off"))}},{key:"_search",value:function(e,t){for(var i=0,n=e.length-1;i<=n;){var s=i+n>>1,a=e[s].startTime,r=e[s].endTime;if(t>=a&&t<r)return s;a<t?i=s+1:a>t&&(n=s-1)}return-1}},{key:"_sanitize",value:function(e){var t=document.createElement("div");t.innerHTML=e;for(var i=t.getElementsByTagName("script"),n=i.length;n--;)A(i[n]);for(var s=t.getElementsByTagName("*"),a=0,r=s.length;a<r;a++)for(var o=s[a].attributes,f=Array.prototype.slice.call(o),l=0,c=f.length;l<c;l++)/^(on|javascript:)/.test(f[l].name)?A(s[a]):"style"===f[l].name&&s[a].removeAttribute(f[l].name);return t.innerHTML}},{key:"_prepareTrack",value:function(e,t,i){var n=this,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];K(this,I,"f")[t]=i,K(this,N,"f")[e].mode="disabled",s&&(U(this,F,t,"f"),K(this,P,"f").classList.add("op-controls__captions--on"),K(this,P,"f").setAttribute("data-active-captions",t),U(this,B,Array.from(K(this,N,"f")).filter((function(e){return e.language===K(n,F,"f")})).pop(),"f"),this._show(),K(this,O,"f").getContainer().classList.contains("op-captions--detected")||K(this,O,"f").getContainer().classList.add("op-captions--detected"))}},{key:"_formatMenuItems",value:function(){for(var e=this,t=[{key:"off",label:K(this,H,"f").off}],i=function(i,n){var s=K(e,N,"f")[i];(t=t.filter((function(e){return e.key!==s.language}))).push({key:s.language,label:K(e,H,"f").lang[s.language]||K(e,N,"f")[i].label})},n=0,s=K(this,N,"f").length;n<s;n++)i(n);return t}}]),e}();O=new WeakMap,P=new WeakMap,S=new WeakMap,W=new WeakMap,j=new WeakMap,R=new WeakMap,N=new WeakMap,I=new WeakMap,D=new WeakMap,B=new WeakMap,F=new WeakMap,q=new WeakMap,H=new WeakMap,z=new WeakMap,V=new WeakMap;const X=G;var Q,$,J,Y,Z,ee,te,ie,ne,se,ae=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},re=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},oe=function(){function e(t,i,n){var a=this;s()(this,e),Q.set(this,void 0),$.set(this,void 0),J.set(this,void 0),Y.set(this,[]),Z.set(this,0),ee.set(this,0),te.set(this,void 0),ie.set(this,void 0),ne.set(this,void 0),se.set(this,void 0),ae(this,Q,t,"f"),ae(this,ie,t.getOptions().labels,"f"),ae(this,ne,i,"f"),ae(this,se,n,"f"),ae(this,$,document.body.classList.contains("op-fullscreen__on"),"f");var r=document;return this.fullScreenEnabled=!!(r.fullscreenEnabled||r.mozFullScreenEnabled||r.msFullscreenEnabled||r.webkitSupportsFullscreen||r.webkitFullscreenEnabled||document.createElement("video").webkitRequestFullScreen),this._keydownEvent=this._keydownEvent.bind(this),this._fullscreenChange=this._fullscreenChange.bind(this),ae(this,Y,["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"],"f"),re(this,Y,"f").forEach((function(e){document.addEventListener(e,a._fullscreenChange,E)})),this._setFullscreenData(!1),re(this,Q,"f").getContainer().addEventListener("keydown",this._keydownEvent,E),d&&(re(this,Q,"f").getElement().addEventListener("webkitbeginfullscreen",(function(){ae(a,$,!0,"f"),a._setFullscreenData(!0),document.body.classList.add("op-fullscreen__on")}),E),re(this,Q,"f").getElement().addEventListener("webkitendfullscreen",(function(){ae(a,$,!1,"f"),a._setFullscreenData(!1),document.body.classList.remove("op-fullscreen__on")}),E)),this}return r()(e,[{key:"create",value:function(){var e=this;ae(this,J,document.createElement("button"),"f"),re(this,J,"f").type="button",re(this,J,"f").className="op-controls__fullscreen op-control__".concat(re(this,ne,"f")),re(this,J,"f").tabIndex=0,re(this,J,"f").title=re(this,ie,"f").fullscreen,re(this,J,"f").setAttribute("aria-controls",re(this,Q,"f").id),re(this,J,"f").setAttribute("aria-pressed","false"),re(this,J,"f").setAttribute("aria-label",re(this,ie,"f").fullscreen),re(this,J,"f").innerHTML='<span class="op-sr">'.concat(re(this,ie,"f").fullscreen,"</span>"),ae(this,te,(function(){re(e,J,"f").setAttribute("aria-pressed","true"),e.toggleFullscreen()}),"f"),ae(this,te,re(this,te,"f").bind(this),"f"),re(this,J,"f").addEventListener("click",re(this,te,"f"),E),re(this,Q,"f").getControls().getLayer(re(this,se,"f")).appendChild(re(this,J,"f"))}},{key:"destroy",value:function(){var e=this;re(this,Q,"f").getContainer().removeEventListener("keydown",this._keydownEvent),re(this,Y,"f").forEach((function(t){document.removeEventListener(t,e._fullscreenChange)})),d&&(re(this,Q,"f").getElement().removeEventListener("webkitbeginfullscreen",(function(){ae(e,$,!0,"f"),e._setFullscreenData(!1),document.body.classList.add("op-fullscreen__on")})),re(this,Q,"f").getElement().removeEventListener("webkitendfullscreen",(function(){ae(e,$,!1,"f"),e._setFullscreenData(!0),document.body.classList.remove("op-fullscreen__on")}))),re(this,J,"f").removeEventListener("click",re(this,te,"f")),A(re(this,J,"f"))}},{key:"toggleFullscreen",value:function(){if(re(this,$,"f")){var e=document;e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():document.webkitCancelFullScreen?e.webkitCancelFullScreen():e.msExitFullscreen?e.msExitFullscreen():this._fullscreenChange(),document.body.classList.remove("op-fullscreen__on")}else{var t=re(this,Q,"f").getElement();ae(this,Z,window.screen.width,"f"),ae(this,ee,window.screen.height,"f"),t.requestFullscreen?t.parentElement.requestFullscreen():t.mozRequestFullScreen?t.parentElement.mozRequestFullScreen():t.webkitRequestFullScreen?t.parentElement.webkitRequestFullScreen():t.msRequestFullscreen?t.parentElement.msRequestFullscreen():t.webkitEnterFullscreen?t.webkitEnterFullscreen():this._fullscreenChange(),document.body.classList.add("op-fullscreen__on")}if("undefined"!=typeof window&&(v||d)){var i=window.screen;i.orientation&&(re(this,$,"f")||i.orientation.lock("landscape"))}}},{key:"_fullscreenChange",value:function(){var e=re(this,$,"f")?void 0:re(this,Z,"f"),t=re(this,$,"f")?void 0:re(this,ee,"f");this._setFullscreenData(!re(this,$,"f")),re(this,Q,"f").isAd()&&re(this,Q,"f").getAd().resizeAds(e,t),ae(this,$,!re(this,$,"f"),"f"),re(this,$,"f")?document.body.classList.add("op-fullscreen__on"):document.body.classList.remove("op-fullscreen__on"),this._resize(e,t)}},{key:"_setFullscreenData",value:function(e){re(this,Q,"f").getContainer().setAttribute("data-fullscreen",(!!e).toString()),re(this,J,"f")&&(e?re(this,J,"f").classList.add("op-controls__fullscreen--out"):re(this,J,"f").classList.remove("op-controls__fullscreen--out"))}},{key:"_resize",value:function(e,t){var i=re(this,Q,"f").getContainer(),n=re(this,Q,"f").getElement(),s=re(this,Q,"f").getOptions(),a="";if(e)i.style.width="100%",n.style.width="100%";else if(s.width){var r="number"==typeof s.width?"".concat(s.width,"px"):s.width;a+="width: ".concat(r," !important;"),n.style.removeProperty("width")}else n.style.removeProperty("width"),i.style.removeProperty("width");if(t)n.style.height="100%",i.style.height="100%";else if(s.height){var o="number"==typeof s.height?"".concat(s.height,"px"):s.height;a+="height: ".concat(o," !important;"),n.style.removeProperty("height")}else n.style.removeProperty("height"),i.style.removeProperty("height");a&&i.setAttribute("style",a)}},{key:"_keydownEvent",value:function(e){var t,i=e.which||e.keyCode||0;!(null===(t=null===document||void 0===document?void 0:document.activeElement)||void 0===t?void 0:t.classList.contains("op-controls__fullscreen"))||13!==i&&32!==i||(this.toggleFullscreen(),e.preventDefault(),e.stopPropagation())}}]),e}();Q=new WeakMap,$=new WeakMap,J=new WeakMap,Y=new WeakMap,Z=new WeakMap,ee=new WeakMap,te=new WeakMap,ie=new WeakMap,ne=new WeakMap,se=new WeakMap;const fe=oe;function le(e){return/\.m3u8$/i.test(e.src)||["application/x-mpegURL","application/vnd.apple.mpegurl"].indexOf(e.type)>-1}function ce(e){return/\.mpd/i.test(e.src)||"application/dash+xml"===e.type}function ue(e){return/(^rtmp:\/\/|\.flv$)/i.test(e.src)||["video/x-flv","video/flv"].indexOf(e.type)>-1}function he(e,t){var i=function(e){var t=e.split("?")[0],i=t?t.split("\\"):null,n=i?i.pop():null,s=n?n.split("/"):null,a=s?s.pop():null;return a&&a.indexOf(".")>-1?a.substring(a.lastIndexOf(".")+1):""}(e);if(!i)return _(t)?"audio/mp3":"video/mp4";switch(i){case"m3u8":case"m3u":return"application/x-mpegURL";case"mpd":return"application/dash+xml";case"mp4":return _(t)?"audio/mp4":"video/mp4";case"mp3":return"audio/mp3";case"webm":return _(t)?"audio/webm":"video/webm";case"ogg":return _(t)?"audio/ogg":"video/ogg";case"ogv":return"video/ogg";case"oga":return"audio/ogg";case"3gp":return"audio/3gpp";case"wav":return"audio/wav";case"aac":return"audio/aac";case"flac":return"audio/flac";default:return _(t)?"audio/mp3":"video/mp4"}}var de,pe,ve,me,ge,ye,be,Ee,we,ke,_e=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Ae=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Le=function(){function e(t,i,n){return s()(this,e),de.set(this,void 0),pe.set(this,void 0),ve.set(this,void 0),me.set(this,{button:{},global:{},media:{}}),ge.set(this,void 0),ye.set(this,void 0),be.set(this,[]),Ee.set(this,""),we.set(this,void 0),ke.set(this,void 0),_e(this,de,t,"f"),_e(this,ye,t.getOptions().labels,"f"),_e(this,ge,t.getOptions().detachMenus,"f"),_e(this,we,i,"f"),_e(this,ke,n,"f"),this}return r()(e,[{key:"create",value:function(){var e=this,t=null!==Ae(this,de,"f").getOptions().defaultLevel?parseInt(Ae(this,de,"f").getOptions().defaultLevel,10):Ae(this,de,"f").getMedia().level;_e(this,Ee,"".concat(t),"f");var i=this._formatMenuItems(),n=i.length?i.find((function(t){return t.key===Ae(e,Ee,"f")})):null,s=n?n.label:Ae(this,ye,"f").auto,a=!1;_e(this,pe,document.createElement("button"),"f"),Ae(this,pe,"f").className="op-controls__levels op-control__".concat(Ae(this,we,"f")),Ae(this,pe,"f").tabIndex=0,Ae(this,pe,"f").title=Ae(this,ye,"f").mediaLevels,Ae(this,pe,"f").setAttribute("aria-controls",Ae(this,de,"f").id),Ae(this,pe,"f").setAttribute("aria-label",Ae(this,ye,"f").mediaLevels),Ae(this,pe,"f").setAttribute("data-active-level",Ae(this,Ee,"f")),Ae(this,pe,"f").innerHTML="<span>".concat(s,"</span>");var r=function(){Ae(e,be,"f").length?a||(Ae(e,de,"f").getMedia().level=t,a=!0):(e._gatherLevels(),setTimeout((function(){Ae(e,de,"f").getMedia().level=t;var i=w("controlschanged");Ae(e,de,"f").getElement().dispatchEvent(i)}),0))};Ae(this,me,"f").media.loadedmetadata=r.bind(this),Ae(this,me,"f").media.manifestLoaded=r.bind(this),Ae(this,me,"f").media.hlsManifestParsed=r.bind(this),Ae(this,ge,"f")&&(this._buildMenu(),Ae(this,me,"f").button.click=function(){if(Ae(e,ge,"f")){for(var t=Ae(e,de,"f").getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i]!==Ae(e,ve,"f")&&t[i].setAttribute("aria-hidden","true");"true"===Ae(e,ve,"f").getAttribute("aria-hidden")?Ae(e,ve,"f").setAttribute("aria-hidden","false"):Ae(e,ve,"f").setAttribute("aria-hidden","true")}},Ae(this,me,"f").button.mouseover=function(){if(!p&&!v){for(var t=Ae(e,de,"f").getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i]!==Ae(e,ve,"f")&&t[i].setAttribute("aria-hidden","true");"true"===Ae(e,ve,"f").getAttribute("aria-hidden")&&Ae(e,ve,"f").setAttribute("aria-hidden","false")}},Ae(this,me,"f").button.mouseout=function(){if(!p&&!v){for(var t=Ae(e,de,"f").getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i].setAttribute("aria-hidden","true");"false"===Ae(e,ve,"f").getAttribute("aria-hidden")&&Ae(e,ve,"f").setAttribute("aria-hidden","true")}},Ae(this,pe,"f").addEventListener("click",Ae(this,me,"f").button.click,E),Ae(this,pe,"f").addEventListener("mouseover",Ae(this,me,"f").button.mouseover,E),Ae(this,ve,"f").addEventListener("mouseover",Ae(this,me,"f").button.mouseover,E),Ae(this,ve,"f").addEventListener("mouseout",Ae(this,me,"f").button.mouseout,E),Ae(this,de,"f").getElement().addEventListener("controlshidden",Ae(this,me,"f").button.mouseout,E)),Ae(this,me,"f").global.click=function(t){var i=t.target,n=Ae(e,de,"f").getMedia().currentTime,s=Ae(e,de,"f").getMedia().paused;if(i.closest("#".concat(Ae(e,de,"f").id))&&M(i,"op-levels__option")){var a=i.getAttribute("data-value"),r=parseInt(a?a.replace("levels-",""):"-1",10);if(_e(e,Ee,"".concat(r),"f"),Ae(e,ge,"f")){Ae(e,pe,"f").setAttribute("data-active-level","".concat(r)),Ae(e,pe,"f").innerHTML="<span>".concat(i.innerText,"</span>");for(var o=i.parentElement&&i.parentElement.parentElement?i.parentElement.parentElement.querySelectorAll(".op-settings__submenu-item"):[],f=0,l=o.length;f<l;++f)o[f].setAttribute("aria-checked","false");i.parentElement&&i.parentElement.setAttribute("aria-checked","true"),Ae(e,ve,"f").setAttribute("aria-hidden","false")}Ae(e,de,"f").getMedia().level=r,Ae(e,de,"f").getMedia().currentTime=n,s||Ae(e,de,"f").play();var c=w("levelchanged",{detail:{label:i.innerText.trim(),level:r}});Ae(e,de,"f").getElement().dispatchEvent(c),t.preventDefault(),t.stopPropagation()}};var o=u.connection||u.mozConnection||u.webkitConnection;Ae(this,me,"f").global.connection=function(){var t=Ae(e,de,"f").getMedia().current;if(!ce(t)&&!le(t)){var i=o.effectiveType,n=Ae(e,be,"f").map((function(e){return Object.assign(Object.assign({},e),{resolution:parseInt(e.label.replace("p",""),10)})})),s=n.find((function(e){return e.resolution<360}));"4g"===i?s=n.find((function(e){return e.resolution>=720})):"3g"===i&&(s=n.find((function(e){return e.resolution>=360&&e.resolution<720}))),s&&(Ae(e,de,"f").pause(),Ae(e,de,"f").getMedia().level=s.id,Ae(e,de,"f").play()),i=o.effectiveType}},Object.keys(Ae(this,me,"f").media).forEach((function(t){Ae(e,de,"f").getElement().addEventListener(t,Ae(e,me,"f").media[t],E)})),document.addEventListener("click",Ae(this,me,"f").global.click,E),o&&o.addEventListener("change",Ae(this,me,"f").global.connection,E)}},{key:"destroy",value:function(){var e=this,t=u.connection||u.mozConnection||u.webkitConnection;Object.keys(Ae(this,me,"f").media).forEach((function(t){Ae(e,de,"f").getElement().removeEventListener(t,Ae(e,me,"f").media[t])})),document.removeEventListener("click",Ae(this,me,"f").global.click),t&&t.removeEventListener("change",Ae(this,me,"f").global.connection),Ae(this,ge,"f")&&(Ae(this,pe,"f").removeEventListener("click",Ae(this,me,"f").button.click),A(Ae(this,pe,"f")),Ae(this,pe,"f").removeEventListener("mouseover",Ae(this,me,"f").button.mouseover),Ae(this,ve,"f").removeEventListener("mouseover",Ae(this,me,"f").button.mouseover),Ae(this,ve,"f").removeEventListener("mouseout",Ae(this,me,"f").button.mouseout),Ae(this,de,"f").getElement().removeEventListener("controlshidden",Ae(this,me,"f").button.mouseout),A(Ae(this,ve,"f")))}},{key:"addSettings",value:function(){if(Ae(this,ge,"f"))return{};var e=this._formatMenuItems();return e.length>2?{className:"op-levels__option",default:Ae(this,Ee,"f")||"-1",key:"levels",name:Ae(this,ye,"f").levels,subitems:e}:{}}},{key:"_formatMenuItems",value:function(){for(var e=this._gatherLevels(),t=e.length,i=t?[{key:"-1",label:Ae(this,ye,"f").auto}]:[],n=function(t){var n=e[t];(i=i.filter((function(e){return e.key!==n.id}))).push({key:n.id,label:n.label})},s=0;s<t;s++)n(s);return i=i.reduce((function(e,t){return e.find((function(e){return e.label===t.label}))?e:e.concat([t])}),[]).sort((function(e,t){return parseInt(e.label,10)>parseInt(t.label,10)?1:-1}))}},{key:"_getResolutionsLabel",value:function(e){return e>=4320?"8K":e>=2160?"4K":e>=1440?"1440p":e>=1080?"1080p":e>=720?"720p":e>=480?"480p":e>=360?"360p":e>=240?"240p":e>=144?"144p":Ae(this,ye,"f").auto}},{key:"_gatherLevels",value:function(){var e=this;return Ae(this,be,"f").length||Ae(this,de,"f").getMedia().levels.forEach((function(t){Ae(e,be,"f").push(Object.assign(Object.assign({},t),{label:t.label||e._getResolutionsLabel(t.height)}))})),Ae(this,be,"f")}},{key:"_buildMenu",value:function(){var e=this;if(Ae(this,ge,"f")){Ae(this,pe,"f").classList.add("op-control--no-hover"),_e(this,ve,document.createElement("div"),"f"),Ae(this,ve,"f").className="op-settings op-levels__menu",Ae(this,ve,"f").setAttribute("aria-hidden","true");var t=this._formatMenuItems(),i='<div class="op-settings__menu" role="menu" id="menu-item-levels">\n                '.concat(t.map((function(t){return'\n                <div class="op-settings__submenu-item" tabindex="0" role="menuitemradio"\n                    aria-checked="'.concat(Ae(e,Ee,"f")===t.key?"true":"false",'">\n                    <div class="op-settings__submenu-label ').concat("op-levels__option",'" data-value="levels-').concat(t.key,'">').concat(t.label,"</div>\n                </div>")})).join(""),"\n            </div>");Ae(this,ve,"f").innerHTML=i;var n=document.createElement("div");n.className="op-controls__container op-control__".concat(Ae(this,we,"f")),n.appendChild(Ae(this,pe,"f")),n.appendChild(Ae(this,ve,"f")),Ae(this,de,"f").getControls().getLayer(Ae(this,ke,"f")).appendChild(n)}}}]),e}();de=new WeakMap,pe=new WeakMap,ve=new WeakMap,me=new WeakMap,ge=new WeakMap,ye=new WeakMap,be=new WeakMap,Ee=new WeakMap,we=new WeakMap,ke=new WeakMap;const Me=Le;var Te,Ce,xe,Oe,Pe,Se,We=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},je=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Re=function(){function e(t,i,n){return s()(this,e),Te.set(this,void 0),Ce.set(this,void 0),xe.set(this,{controls:{},media:{}}),Oe.set(this,void 0),Pe.set(this,void 0),Se.set(this,void 0),We(this,Te,t,"f"),We(this,Oe,je(this,Te,"f").getOptions().labels,"f"),We(this,Pe,i,"f"),We(this,Se,n,"f"),this._keydownEvent=this._keydownEvent.bind(this),this}return r()(e,[{key:"create",value:function(){var e=this;We(this,Ce,document.createElement("button"),"f"),je(this,Ce,"f").type="button",je(this,Ce,"f").className="op-controls__playpause op-control__".concat(je(this,Pe,"f")),je(this,Ce,"f").tabIndex=0,je(this,Ce,"f").title=je(this,Oe,"f").play,je(this,Ce,"f").setAttribute("aria-controls",je(this,Te,"f").id),je(this,Ce,"f").setAttribute("aria-pressed","false"),je(this,Ce,"f").setAttribute("aria-label",je(this,Oe,"f").play),je(this,Ce,"f").innerHTML='<span class="op-sr">'.concat(je(this,Oe,"f").play,"/").concat(je(this,Oe,"f").pause,"</span>"),je(this,Te,"f").getControls().getLayer(je(this,Se,"f")).appendChild(je(this,Ce,"f")),je(this,xe,"f").media.click=function(t){je(e,Ce,"f").setAttribute("aria-pressed","true");var i=je(e,Te,"f").activeElement();i.paused||i.ended?(je(e,Te,"f").getAd()&&(je(e,Te,"f").getAd().playRequested=!0),i.play(),je(e,xe,"f").media.play()):(i.pause(),je(e,xe,"f").media.pause()),t.preventDefault(),t.stopPropagation()};var t=_(je(this,Te,"f").getElement());je(this,xe,"f").media.play=function(){je(e,Te,"f").activeElement().ended?(je(e,Te,"f").isMedia()?je(e,Ce,"f").classList.add("op-controls__playpause--replay"):je(e,Ce,"f").classList.add("op-controls__playpause--pause"),je(e,Ce,"f").title=je(e,Oe,"f").play,je(e,Ce,"f").setAttribute("aria-label",je(e,Oe,"f").play)):(je(e,Ce,"f").classList.remove("op-controls__playpause--replay"),je(e,Ce,"f").classList.add("op-controls__playpause--pause"),je(e,Ce,"f").title=je(e,Oe,"f").pause,je(e,Ce,"f").setAttribute("aria-label",je(e,Oe,"f").pause),je(e,Te,"f").getOptions().pauseOthers&&Object.keys(fs.instances).forEach((function(t){t!==je(e,Te,"f").id&&fs.instances[t].activeElement().pause()})))},je(this,xe,"f").media.loadedmetadata=function(){M(je(e,Ce,"f"),"op-controls__playpause--pause")&&(je(e,Ce,"f").classList.remove("op-controls__playpause--replay"),je(e,Ce,"f").classList.remove("op-controls__playpause--pause"),je(e,Ce,"f").title=je(e,Oe,"f").play,je(e,Ce,"f").setAttribute("aria-label",je(e,Oe,"f").play))},je(this,xe,"f").media.playing=function(){M(je(e,Ce,"f"),"op-controls__playpause--pause")||(je(e,Ce,"f").classList.remove("op-controls__playpause--replay"),je(e,Ce,"f").classList.add("op-controls__playpause--pause"),je(e,Ce,"f").title=je(e,Oe,"f").pause,je(e,Ce,"f").setAttribute("aria-label",je(e,Oe,"f").pause))},je(this,xe,"f").media.pause=function(){je(e,Ce,"f").classList.remove("op-controls__playpause--pause"),je(e,Ce,"f").title=je(e,Oe,"f").play,je(e,Ce,"f").setAttribute("aria-label",je(e,Oe,"f").play)},je(this,xe,"f").media.ended=function(){je(e,Te,"f").activeElement().ended&&je(e,Te,"f").isMedia()||je(e,Te,"f").getElement().currentTime>=je(e,Te,"f").getElement().duration||je(e,Te,"f").getElement().currentTime<=0?(je(e,Ce,"f").classList.add("op-controls__playpause--replay"),je(e,Ce,"f").classList.remove("op-controls__playpause--pause")):(je(e,Ce,"f").classList.remove("op-controls__playpause--replay"),je(e,Ce,"f").classList.add("op-controls__playpause--pause")),je(e,Ce,"f").title=je(e,Oe,"f").play,je(e,Ce,"f").setAttribute("aria-label",je(e,Oe,"f").play)},je(this,xe,"f").media.adsmediaended=function(){je(e,Ce,"f").classList.remove("op-controls__playpause--replay"),je(e,Ce,"f").classList.add("op-controls__playpause--pause"),je(e,Ce,"f").title=je(e,Oe,"f").pause,je(e,Ce,"f").setAttribute("aria-label",je(e,Oe,"f").pause)},je(this,xe,"f").media.playererror=function(){t&&je(e,Te,"f").activeElement().pause()};var i=je(this,Te,"f").getElement();je(this,xe,"f").controls.controlschanged=function(){if(!je(e,Te,"f").activeElement().paused){var t=w("playing");i.dispatchEvent(t)}},Object.keys(je(this,xe,"f").media).forEach((function(t){i.addEventListener(t,je(e,xe,"f").media[t],E)})),je(this,Te,"f").getControls().getContainer().addEventListener("controlschanged",je(this,xe,"f").controls.controlschanged,E),je(this,Te,"f").getContainer().addEventListener("keydown",this._keydownEvent,E),je(this,Ce,"f").addEventListener("click",je(this,xe,"f").media.click,E)}},{key:"destroy",value:function(){var e=this;Object.keys(je(this,xe,"f").media).forEach((function(t){je(e,Te,"f").getElement().removeEventListener(t,je(e,xe,"f").media[t])})),je(this,Te,"f").getControls().getContainer().removeEventListener("controlschanged",je(this,xe,"f").controls.controlschanged),je(this,Te,"f").getContainer().removeEventListener("keydown",this._keydownEvent),je(this,Ce,"f").removeEventListener("click",je(this,xe,"f").media.click),A(je(this,Ce,"f"))}},{key:"_keydownEvent",value:function(e){var t,i=e.which||e.keyCode||0;!(null===(t=null===document||void 0===document?void 0:document.activeElement)||void 0===t?void 0:t.classList.contains("op-controls__playpause"))||13!==i&&32!==i||je(this,xe,"f").media.click(e)}}]),e}();Te=new WeakMap,Ce=new WeakMap,xe=new WeakMap,Oe=new WeakMap,Pe=new WeakMap,Se=new WeakMap;const Ne=Re;var Ie,De,Be,Fe,qe,He,ze,Ve,Ue,Ke,Ge,Xe=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Qe=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},$e=function(){function e(t,i,n){return s()(this,e),Ie.set(this,void 0),De.set(this,void 0),Be.set(this,void 0),Fe.set(this,void 0),qe.set(this,void 0),He.set(this,void 0),ze.set(this,{container:{},controls:{},global:{},media:{},slider:{}}),Ve.set(this,void 0),Ue.set(this,void 0),Ke.set(this,void 0),Ge.set(this,void 0),Xe(this,Ie,t,"f"),Xe(this,Ue,t.getOptions().labels,"f"),Xe(this,Ve,!1,"f"),Xe(this,Ke,i,"f"),Xe(this,Ge,n,"f"),this._keydownEvent=this._keydownEvent.bind(this),this}return r()(e,[{key:"create",value:function(){var e=this;Xe(this,De,document.createElement("div"),"f"),Qe(this,De,"f").className="op-controls__progress op-control__".concat(Qe(this,Ke,"f")),Qe(this,De,"f").tabIndex=0,Qe(this,De,"f").setAttribute("aria-label",Qe(this,Ue,"f").progressSlider),Qe(this,De,"f").setAttribute("aria-valuemin","0"),Xe(this,Be,document.createElement("input"),"f"),Qe(this,Be,"f").type="range",Qe(this,Be,"f").className="op-controls__progress--seek",Qe(this,Be,"f").tabIndex=-1,Qe(this,Be,"f").setAttribute("min","0"),Qe(this,Be,"f").setAttribute("max","0"),Qe(this,Be,"f").setAttribute("step","0.1"),Qe(this,Be,"f").value="0",Qe(this,Be,"f").setAttribute("aria-label",Qe(this,Ue,"f").progressRail),Qe(this,Be,"f").setAttribute("role","slider"),Xe(this,Fe,document.createElement("progress"),"f"),Qe(this,Fe,"f").className="op-controls__progress--buffer",Qe(this,Fe,"f").setAttribute("max","100"),Qe(this,Fe,"f").value=0,Xe(this,qe,document.createElement("progress"),"f"),Qe(this,qe,"f").className="op-controls__progress--played",Qe(this,qe,"f").setAttribute("max","100"),Qe(this,qe,"f").setAttribute("role","presentation"),Qe(this,qe,"f").value=0,Qe(this,De,"f").appendChild(Qe(this,Be,"f")),Qe(this,De,"f").appendChild(Qe(this,qe,"f")),Qe(this,De,"f").appendChild(Qe(this,Fe,"f")),p||v||(Xe(this,He,document.createElement("span"),"f"),Qe(this,He,"f").className="op-controls__tooltip",Qe(this,He,"f").tabIndex=-1,Qe(this,He,"f").innerHTML="00:00",Qe(this,De,"f").appendChild(Qe(this,He,"f")));var t=function(){Qe(e,Be,"f").classList.contains("error")&&Qe(e,Be,"f").classList.remove("error");var t=Qe(e,Ie,"f").activeElement();if(t.duration===1/0||Qe(e,Ie,"f").getElement().getAttribute("op-live__enabled")||Qe(e,Ie,"f").getElement().getAttribute("op-dvr__enabled"))Qe(e,Ie,"f").getElement().getAttribute("op-dvr__enabled")?(Qe(e,Be,"f").setAttribute("max","1"),Qe(e,Be,"f").value="1",Qe(e,Be,"f").style.backgroundSize="100% 100%",Qe(e,qe,"f").value=1,Qe(e,De,"f").setAttribute("aria-valuemax","1"),Qe(e,De,"f").setAttribute("aria-hidden","false")):Qe(e,Ie,"f").getOptions().live.showProgress||Qe(e,De,"f").setAttribute("aria-hidden","true");else{Qe(e,Be,"f").setAttribute("max","".concat(t.duration));var i=Qe(e,Ie,"f").isMedia()?t.currentTime:t.duration-t.currentTime;Qe(e,Be,"f").value=i.toString(),Qe(e,De,"f").setAttribute("aria-valuemax",t.duration.toString())}},i=0,n=Qe(this,Ie,"f").getOptions().progress.duration||0,s=_(Qe(this,Ie,"f").getElement());Qe(this,ze,"f").media.loadedmetadata=t.bind(this),Qe(this,ze,"f").controls.controlschanged=t.bind(this),Qe(this,ze,"f").media.progress=function(t){var i=t.target;if(i.duration===1/0||Qe(e,Ie,"f").getElement().getAttribute("op-live__enabled"))Qe(e,Ie,"f").getElement().getAttribute("op-dvr__enabled")||"false"!==Qe(e,De,"f").getAttribute("aria-hidden")||Qe(e,Ie,"f").getOptions().live.showProgress||Qe(e,De,"f").setAttribute("aria-hidden","true");else if(i.duration>0)for(var n=0,s=i.buffered.length;n<s;n++)if(i.buffered.start(i.buffered.length-1-n)<i.currentTime){Qe(e,Fe,"f").value=i.buffered.end(i.buffered.length-1-n)/i.duration*100;break}},Qe(this,ze,"f").media.waiting=function(){s&&!Qe(e,Be,"f").classList.contains("loading")&&Qe(e,Be,"f").classList.add("loading"),s&&Qe(e,Be,"f").classList.contains("error")&&Qe(e,Be,"f").classList.remove("error")},Qe(this,ze,"f").media.playererror=function(){s&&!Qe(e,Be,"f").classList.contains("error")&&Qe(e,Be,"f").classList.add("error"),s&&Qe(e,Be,"f").classList.contains("loading")&&Qe(e,Be,"f").classList.remove("loading")},Qe(this,ze,"f").media.pause=function(){var t=Qe(e,Ie,"f").activeElement();if(t.duration!==1/0&&!Qe(e,Ie,"f").getElement().getAttribute("op-live__enabled")){var i=t.currentTime;Qe(e,De,"f").setAttribute("aria-valuenow",i.toString()),Qe(e,De,"f").setAttribute("aria-valuetext",C(i))}},Qe(this,ze,"f").media.play=function(){s&&Qe(e,Be,"f").classList.contains("loading")&&Qe(e,Be,"f").classList.remove("loading"),s&&Qe(e,Be,"f").classList.contains("error")&&Qe(e,Be,"f").classList.remove("error"),Qe(e,Ie,"f").activeElement().duration===1/0||Qe(e,Ie,"f").getElement().getAttribute("op-live__enabled")||(Qe(e,De,"f").removeAttribute("aria-valuenow"),Qe(e,De,"f").removeAttribute("aria-valuetext"))},Qe(this,ze,"f").media.playing=function(){s&&Qe(e,Be,"f").classList.contains("loading")&&Qe(e,Be,"f").classList.remove("loading"),s&&Qe(e,Be,"f").classList.contains("error")&&Qe(e,Be,"f").classList.remove("error")},Qe(this,ze,"f").media.timeupdate=function(){var t=Qe(e,Ie,"f").activeElement();if(t.duration===1/0||Qe(e,Ie,"f").getElement().getAttribute("op-live__enabled")&&!Qe(e,Ie,"f").getElement().getAttribute("op-dvr__enabled"))Qe(e,Ie,"f").getElement().getAttribute("op-dvr__enabled")||"false"!==Qe(e,De,"f").getAttribute("aria-hidden")||Qe(e,Ie,"f").getOptions().live.showProgress||Qe(e,De,"f").setAttribute("aria-hidden","true");else{Qe(e,Be,"f").getAttribute("max")&&"0"!==Qe(e,Be,"f").getAttribute("max")&&parseFloat(Qe(e,Be,"f").getAttribute("max")||"-1")===t.duration||(Qe(e,Be,"f").setAttribute("max","".concat(t.duration)),Qe(e,De,"f").setAttribute("aria-hidden","false"));var s=t.duration-t.currentTime+1>=100?100:t.duration-t.currentTime+1,a=Qe(e,Ie,"f").isMedia()?t.currentTime:s,r=parseFloat(Qe(e,Be,"f").min),o=parseFloat(Qe(e,Be,"f").max);Qe(e,Be,"f").value=a.toString(),Qe(e,Be,"f").style.backgroundSize="".concat(100*(a-r)/(o-r),"% 100%"),Qe(e,qe,"f").value=t.duration<=0||isNaN(t.duration)||!isFinite(t.duration)?n:a/t.duration*100,Qe(e,Ie,"f").getElement().getAttribute("op-dvr__enabled")&&Math.floor(Qe(e,qe,"f").value)>=99&&(i=t.currentTime,Qe(e,De,"f").setAttribute("aria-hidden","false"))}},Qe(this,ze,"f").media.durationchange=function(){var t=Qe(e,Ie,"f").activeElement(),i=Qe(e,Ie,"f").isMedia()?t.currentTime:t.duration-t.currentTime;Qe(e,Be,"f").setAttribute("max","".concat(t.duration)),Qe(e,De,"f").setAttribute("aria-valuemax",t.duration.toString()),Qe(e,qe,"f").value=t.duration<=0||isNaN(t.duration)||!isFinite(t.duration)?n:i/t.duration*100},Qe(this,ze,"f").media.ended=function(){Qe(e,Be,"f").style.backgroundSize="0% 100%",Qe(e,Be,"f").setAttribute("max","0"),Qe(e,Fe,"f").value=0,Qe(e,qe,"f").value=0};var a=function(t){if(!M(Qe(e,Be,"f"),"op-progress--pressed")){var s=t.target;Qe(e,Be,"f").classList.add(".op-progress--pressed");var a=Qe(e,Ie,"f").activeElement(),r=parseFloat(s.min),o=parseFloat(s.max),f=parseFloat(s.value);Qe(e,Be,"f").style.backgroundSize="".concat(100*(f-r)/(o-r),"% 100%"),Qe(e,qe,"f").value=a.duration<=0||isNaN(a.duration)||!isFinite(a.duration)?n:f/a.duration*100,Qe(e,Ie,"f").getElement().getAttribute("op-dvr__enabled")?a.currentTime=Math.round(Qe(e,qe,"f").value)>=99?i:f:a.currentTime=f,Qe(e,Be,"f").classList.remove(".op-progress--pressed")}},r=function(t){var i=Qe(e,Ie,"f").activeElement();1!==t.which&&0!==t.which||!Qe(e,Ie,"f").isMedia()||i.paused||(i.pause(),Xe(e,Ve,!0,"f"))},o=function(){var t=Qe(e,Ie,"f").activeElement();!0===Qe(e,Ve,"f")&&Qe(e,Ie,"f").isMedia()&&t.paused&&(t.play(),Xe(e,Ve,!1,"f"))};Qe(this,ze,"f").slider.input=a.bind(this),Qe(this,ze,"f").slider.change=a.bind(this),Qe(this,ze,"f").slider.mousedown=r.bind(this),Qe(this,ze,"f").slider.mouseup=o.bind(this),Qe(this,ze,"f").slider.touchstart=function(t){var i=Qe(e,Ie,"f").activeElement();if(i.duration!==1/0){var n=t.originalEvent?t.originalEvent.changedTouches:t.changedTouches,s=((n?n[0].pageX:t.pageX)-T(Qe(e,De,"f")).left)/Qe(e,De,"f").offsetWidth*i.duration;Qe(e,Be,"f").value=s.toString(),a(t),r(t)}}.bind(this),Qe(this,ze,"f").slider.touchend=o.bind(this),p||v||(Qe(this,ze,"f").container.mousemove=function(t){var i=Qe(e,Ie,"f").activeElement();if(i.duration!==1/0&&!Qe(e,Ie,"f").isAd()){var n=t.originalEvent&&t.originalEvent.changedTouches?t.originalEvent.changedTouches[0].pageX:t.pageX,s=n-T(Qe(e,De,"f")).left,a=Qe(e,He,"f").offsetWidth/2,r=s/Qe(e,De,"f").offsetWidth,o=r*i.duration,f=Qe(e,Ie,"f").getContainer(),l=f.offsetWidth-Qe(e,He,"f").offsetWidth;s<=0||n-T(f).left<=a?s=0:n-T(f).left>=l?s=l-T(Qe(e,Be,"f")).left-10:s-=a,r>=0&&r<=1?Qe(e,He,"f").classList.add("op-controls__tooltip--visible"):Qe(e,He,"f").classList.remove("op-controls__tooltip--visible"),Qe(e,He,"f").style.left="".concat(s,"px"),Qe(e,He,"f").innerHTML=isNaN(o)?"00:00":C(o)}},Qe(this,ze,"f").global.mousemove=function(t){t.target.closest(".op-controls__progress")&&!Qe(e,Ie,"f").isAd()||Qe(e,He,"f").classList.remove("op-controls__tooltip--visible")}),Object.keys(Qe(this,ze,"f").media).forEach((function(t){Qe(e,Ie,"f").getElement().addEventListener(t,Qe(e,ze,"f").media[t],E)})),Object.keys(Qe(this,ze,"f").slider).forEach((function(t){Qe(e,Be,"f").addEventListener(t,Qe(e,ze,"f").slider[t],E)})),Qe(this,De,"f").addEventListener("keydown",Qe(this,Ie,"f").getEvents().keydown,E),Qe(this,De,"f").addEventListener("mousemove",Qe(this,ze,"f").container.mousemove,E),document.addEventListener("mousemove",Qe(this,ze,"f").global.mousemove,E),Qe(this,Ie,"f").getContainer().addEventListener("keydown",this._keydownEvent,E),Qe(this,Ie,"f").getControls().getContainer().addEventListener("controlschanged",Qe(this,ze,"f").controls.controlschanged,E),Qe(this,Ie,"f").getControls().getLayer(Qe(this,Ge,"f")).appendChild(Qe(this,De,"f"))}},{key:"destroy",value:function(){var e=this;Object.keys(Qe(this,ze,"f")).forEach((function(t){Qe(e,Ie,"f").getElement().removeEventListener(t,Qe(e,ze,"f")[t])})),Object.keys(Qe(this,ze,"f").slider).forEach((function(t){Qe(e,Be,"f").removeEventListener(t,Qe(e,ze,"f").slider[t])})),Qe(this,De,"f").removeEventListener("keydown",Qe(this,Ie,"f").getEvents().keydown),Qe(this,De,"f").removeEventListener("mousemove",Qe(this,ze,"f").container.mousemove),document.removeEventListener("mousemove",Qe(this,ze,"f").global.mousemove),Qe(this,Ie,"f").getContainer().removeEventListener("keydown",this._keydownEvent),Qe(this,Ie,"f").getControls().getContainer().removeEventListener("controlschanged",Qe(this,ze,"f").controls.controlschanged),A(Qe(this,Fe,"f")),A(Qe(this,qe,"f")),A(Qe(this,Be,"f")),p||v||A(Qe(this,He,"f")),A(Qe(this,De,"f"))}},{key:"_keydownEvent",value:function(e){var t=Qe(this,Ie,"f").activeElement(),i=Qe(this,Ie,"f").isAd(),n=e.which||e.keyCode||0;if(!i&&n>=48&&n<=57&&t.duration!==1/0){for(var s=0,a=48;a<=57;a++)a<n&&s++;t.currentTime=t.duration*(.1*s),e.preventDefault(),e.stopPropagation()}}}]),e}();Ie=new WeakMap,De=new WeakMap,Be=new WeakMap,Fe=new WeakMap,qe=new WeakMap,He=new WeakMap,ze=new WeakMap,Ve=new WeakMap,Ue=new WeakMap,Ke=new WeakMap,Ge=new WeakMap;const Je=$e;var Ye,Ze,et,tt,it,nt,st,at,rt,ot=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},ft=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},lt=function(){function e(t,i,n){return s()(this,e),Ye.set(this,void 0),Ze.set(this,{}),et.set(this,void 0),tt.set(this,void 0),it.set(this,{global:{},media:{}}),nt.set(this,""),st.set(this,void 0),at.set(this,void 0),rt.set(this,void 0),ot(this,Ye,t,"f"),ot(this,st,t.getOptions().labels,"f"),ot(this,at,i,"f"),ot(this,rt,n,"f"),this._keydownEvent=this._keydownEvent.bind(this),this}return r()(e,[{key:"create",value:function(){var e=this;ot(this,et,document.createElement("button"),"f"),ft(this,et,"f").className="op-controls__settings op-control__".concat(ft(this,at,"f")),ft(this,et,"f").tabIndex=0,ft(this,et,"f").title=ft(this,st,"f").settings,ft(this,et,"f").setAttribute("aria-controls",ft(this,Ye,"f").id),ft(this,et,"f").setAttribute("aria-pressed","false"),ft(this,et,"f").setAttribute("aria-label",ft(this,st,"f").settings),ft(this,et,"f").innerHTML='<span class="op-sr">'.concat(ft(this,st,"f").settings,"</span>"),ot(this,tt,document.createElement("div"),"f"),ft(this,tt,"f").className="op-settings",ft(this,tt,"f").setAttribute("aria-hidden","true"),ft(this,tt,"f").innerHTML='<div class="op-settings__menu" role="menu"></div>',this.clickEvent=function(){ft(e,et,"f").setAttribute("aria-pressed","true");for(var t=ft(e,Ye,"f").getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i]!==ft(e,tt,"f")&&t[i].setAttribute("aria-hidden","true");ft(e,tt,"f").setAttribute("aria-hidden","false"===ft(e,tt,"f").getAttribute("aria-hidden")?"true":"false")},this.hideEvent=function(){var t;t&&"undefined"!=typeof window&&window.cancelAnimationFrame(t),"undefined"!=typeof window&&(t=window.requestAnimationFrame((function(){ft(e,tt,"f").innerHTML=ft(e,nt,"f"),ft(e,tt,"f").setAttribute("aria-hidden","true")})))},this.removeEvent=function(t){var i=t.detail,n=i.id,s=i.type;e.removeItem(n,s)},ft(this,it,"f").media.controlshidden=this.hideEvent.bind(this),ft(this,it,"f").media.settingremoved=this.removeEvent.bind(this),ft(this,it,"f").media.play=this.hideEvent.bind(this),ft(this,it,"f").media.pause=this.hideEvent.bind(this),ft(this,Ye,"f").getContainer().addEventListener("keydown",this._keydownEvent,E),this.clickEvent=this.clickEvent.bind(this),this.hideEvent=this.hideEvent.bind(this),ft(this,it,"f").global.click=function(t){t.target.closest("#".concat(ft(e,Ye,"f").id))&&M(t.target,"op-speed__option")&&(ft(e,Ye,"f").getMedia().playbackRate=parseFloat(t.target.getAttribute("data-value").replace("speed-","")))},ft(this,it,"f").global.resize=this.hideEvent.bind(this),ft(this,et,"f").addEventListener("click",this.clickEvent,E),Object.keys(ft(this,it,"f")).forEach((function(t){ft(e,Ye,"f").getElement().addEventListener(t,ft(e,it,"f").media[t],E)})),document.addEventListener("click",ft(this,it,"f").global.click,E),document.addEventListener("keydown",ft(this,it,"f").global.click,E),"undefined"!=typeof window&&window.addEventListener("resize",ft(this,it,"f").global.resize,E),ft(this,Ye,"f").getControls().getLayer(ft(this,rt,"f")).appendChild(ft(this,et,"f")),ft(this,Ye,"f").getContainer().appendChild(ft(this,tt,"f"))}},{key:"destroy",value:function(){var e=this;ft(this,et,"f").removeEventListener("click",this.clickEvent),Object.keys(ft(this,it,"f")).forEach((function(t){ft(e,Ye,"f").getElement().removeEventListener(t,ft(e,it,"f").media[t])})),document.removeEventListener("click",ft(this,it,"f").global.click),document.removeEventListener("keydown",ft(this,it,"f").global.click),"undefined"!=typeof window&&window.removeEventListener("resize",ft(this,it,"f").global.resize),void 0!==ft(this,it,"f").global["settings.submenu"]&&(document.removeEventListener("click",ft(this,it,"f").global["settings.submenu"]),ft(this,Ye,"f").getElement().removeEventListener("controlshidden",this.hideEvent)),ft(this,Ye,"f").getContainer().removeEventListener("keydown",this._keydownEvent),A(ft(this,tt,"f")),A(ft(this,et,"f"))}},{key:"addSettings",value:function(){var e=ft(this,Ye,"f").getMedia(),t=1;return ft(this,Ye,"f")&&e&&(t=e.defaultPlaybackRate!==e.playbackRate?e.playbackRate:e.defaultPlaybackRate),{className:"op-speed__option",default:t.toString(),key:"speed",name:ft(this,st,"f").speed,subitems:[{key:"0.25",label:"0.25"},{key:"0.5",label:"0.5"},{key:"0.75",label:"0.75"},{key:"1",label:ft(this,st,"f").speedNormal},{key:"1.25",label:"1.25"},{key:"1.5",label:"1.5"},{key:"2",label:"2"}]}}},{key:"addItem",value:function(e,i,n,s,a){var r=this,o=document.createElement("div");o.className="op-settings__menu-item",o.tabIndex=0,o.setAttribute("role","menuitemradio"),o.innerHTML='<div class="op-settings__menu-label" data-value="'.concat(i,"-").concat(n,'">').concat(e,"</div>");var f=s?s.find((function(e){return e.key===n})):null;f&&(o.innerHTML+='<div class="op-settings__menu-content" tabindex="0">'.concat(f.label,"</div>"));var l=ft(this,tt,"f").querySelector(".op-settings__menu");if(l&&l.appendChild(o),ot(this,nt,ft(this,tt,"f").innerHTML,"f"),s){var c='\n                <div class="op-settings__header">\n                    <button type="button" class="op-settings__back" tabindex="0">'.concat(e,'</button>\n                </div>\n                <div class="op-settings__menu" role="menu" id="menu-item-').concat(i,'">\n                    ').concat(s.map((function(e){return'\n                    <div class="op-settings__submenu-item" role="menuitemradio" aria-checked="'.concat(n===e.key?"true":"false",'">\n                        <div class="op-settings__submenu-label ').concat(a||"",'" tabindex="0" data-value="').concat(i,"-").concat(e.key,'">\n                            ').concat(e.label,"\n                        </div>\n                    </div>")})).join(""),"\n                </div>");ft(this,Ze,"f")[i]=c}ft(this,it,"f").global["settings.submenu"]=function(e){var s=e.target;if(s.closest("#".concat(ft(r,Ye,"f").id))){if(M(s,"op-settings__back"))ft(r,tt,"f").classList.add("op-settings--sliding"),setTimeout((function(){ft(r,tt,"f").innerHTML=ft(r,nt,"f"),ft(r,tt,"f").classList.remove("op-settings--sliding")}),100);else if(M(s,"op-settings__menu-content")){var a=s.parentElement?s.parentElement.querySelector(".op-settings__menu-label"):null,o=a?a.getAttribute("data-value"):null,f=o?o.split("-"):[];if(f.length>0){f.pop();var l=f.join("-").replace(/^\-|\-$/,"");void 0!==t()(ft(r,Ze,"f")[l])&&(ft(r,tt,"f").classList.add("op-settings--sliding"),setTimeout((function(){ft(r,tt,"f").innerHTML=ft(r,Ze,"f")[l],ft(r,tt,"f").classList.remove("op-settings--sliding")}),100))}}else if(M(s,"op-settings__submenu-label")){var c=s.getAttribute("data-value"),u=c?c.replace("".concat(i,"-"),""):"",h=s.innerText,d=ft(r,tt,"f").querySelector("#menu-item-".concat(i," .op-settings__submenu-item[aria-checked=true]"));d&&(d.setAttribute("aria-checked","false"),s.parentElement&&s.parentElement.setAttribute("aria-checked","true"),ft(r,Ze,"f")[i]=ft(r,tt,"f").innerHTML,ft(r,tt,"f").classList.add("op-settings--sliding"),setTimeout((function(){ft(r,tt,"f").innerHTML=ft(r,nt,"f");var e=ft(r,tt,"f").querySelector('.op-settings__menu-label[data-value="'.concat(i,"-").concat(n,'"]'));e&&(e.setAttribute("data-value","".concat(c)),e.nextElementSibling&&(e.nextElementSibling.innerHTML=h)),n=u,ot(r,nt,ft(r,tt,"f").innerHTML,"f"),ft(r,tt,"f").classList.remove("op-settings--sliding")}),100))}}else r.hideEvent()},document.addEventListener("click",ft(this,it,"f").global["settings.submenu"],E),ft(this,Ye,"f").getElement().addEventListener("controlshidden",this.hideEvent,E)}},{key:"removeItem",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=ft(this,Ye,"f").getElement().querySelector(".op-settings__submenu-label[data-value=".concat(t,"-").concat(e,"]"));if(n&&A(n),ft(this,Ye,"f").getElement().querySelectorAll(".op-settings__submenu-label[data-value^=".concat(t,"]")).length<i){delete ft(this,Ze,"f")[t];var s=ft(this,Ye,"f").getElement().querySelector(".op-settings__menu-label[data-value^=".concat(t,"]")),a=s?s.closest(".op-settings__menu-item"):null;a&&A(a)}}},{key:"_keydownEvent",value:function(e){var t,i,n,s,a=e.which||e.keyCode||0,r=ft(this,Ye,"f").isAd(),o=null===(t=null===document||void 0===document?void 0:document.activeElement)||void 0===t?void 0:t.classList.contains("op-controls__settings"),f=(null===(i=null===document||void 0===document?void 0:document.activeElement)||void 0===i?void 0:i.classList.contains("op-settings__menu-content"))||(null===(n=null===document||void 0===document?void 0:document.activeElement)||void 0===n?void 0:n.classList.contains("op-settings__back"))||(null===(s=null===document||void 0===document?void 0:document.activeElement)||void 0===s?void 0:s.classList.contains("op-settings__submenu-label"));r||(!o||13!==a&&32!==a?!f||13!==a&&32!==a||(ft(this,it,"f").global["settings.submenu"](e),e.preventDefault(),e.stopPropagation()):(this.clickEvent(),e.preventDefault(),e.stopPropagation()))}}]),e}();Ye=new WeakMap,Ze=new WeakMap,et=new WeakMap,tt=new WeakMap,it=new WeakMap,nt=new WeakMap,st=new WeakMap,at=new WeakMap,rt=new WeakMap;const ct=lt;var ut,ht,dt,pt,vt,mt,gt,yt,bt,Et=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},wt=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},kt=function(){function e(t,i,n){return s()(this,e),ut.set(this,void 0),ht.set(this,void 0),dt.set(this,void 0),pt.set(this,void 0),vt.set(this,void 0),mt.set(this,{controls:{},media:{}}),gt.set(this,void 0),yt.set(this,void 0),bt.set(this,void 0),Et(this,ut,t,"f"),Et(this,gt,t.getOptions().labels,"f"),Et(this,yt,i,"f"),Et(this,bt,n,"f"),this}return r()(e,[{key:"create",value:function(){var e=this;Et(this,ht,document.createElement("time"),"f"),wt(this,ht,"f").className="op-controls__current",wt(this,ht,"f").setAttribute("role","timer"),wt(this,ht,"f").setAttribute("aria-live","off"),wt(this,ht,"f").setAttribute("aria-hidden","false"),wt(this,ht,"f").innerText="0:00";var t=wt(this,ut,"f").getOptions().progress.showCurrentTimeOnly;t||(Et(this,dt,document.createElement("span"),"f"),wt(this,dt,"f").className="op-controls__time-delimiter",wt(this,dt,"f").setAttribute("aria-hidden","false"),wt(this,dt,"f").innerText="/",Et(this,pt,document.createElement("time"),"f"),wt(this,pt,"f").className="op-controls__duration",wt(this,pt,"f").setAttribute("aria-hidden","false"),wt(this,pt,"f").innerText=C(wt(this,ut,"f").getOptions().progress.duration));var i=wt(this,ut,"f").getControls().getLayer(wt(this,bt,"f"));Et(this,vt,document.createElement("span"),"f"),wt(this,vt,"f").className="op-controls-time op-control__".concat(wt(this,yt,"f")),wt(this,vt,"f").appendChild(wt(this,ht,"f")),t||(wt(this,vt,"f").appendChild(wt(this,dt,"f")),wt(this,vt,"f").appendChild(wt(this,pt,"f"))),i.appendChild(wt(this,vt,"f"));var n=function(){var i=wt(e,ut,"f").activeElement();if(i.duration===1/0||wt(e,ut,"f").getElement().getAttribute("op-live__enabled"))t||(wt(e,pt,"f").setAttribute("aria-hidden","true"),wt(e,dt,"f").setAttribute("aria-hidden","true"));else{if(!t){var n=isNaN(i.duration)?wt(e,ut,"f").getOptions().progress.duration:i.duration;wt(e,pt,"f").innerText=C(n)}wt(e,ht,"f").innerText=C(i.currentTime)}};wt(this,mt,"f").media.loadedmetadata=n.bind(this),wt(this,mt,"f").controls.controlschanged=n.bind(this);var s=wt(this,ut,"f").getOptions().live.showLabel;wt(this,mt,"f").media.timeupdate=function(){var i=wt(e,ut,"f").activeElement();if(i.duration===1/0||wt(e,ut,"f").getElement().getAttribute("op-live__enabled")||wt(e,ut,"f").getElement().getAttribute("op-dvr__enabled"))wt(e,ut,"f").getElement().getAttribute("op-dvr__enabled")?(t||(wt(e,pt,"f").setAttribute("aria-hidden","true"),wt(e,dt,"f").setAttribute("aria-hidden","true")),wt(e,ht,"f").innerText=C(i.currentTime)):t||!wt(e,ut,"f").getElement().getAttribute("op-dvr__enabled")&&"false"===wt(e,pt,"f").getAttribute("aria-hidden")?(t||(wt(e,pt,"f").setAttribute("aria-hidden","true"),wt(e,dt,"f").setAttribute("aria-hidden","true")),wt(e,ht,"f").innerText=s?wt(e,gt,"f").live:C(i.currentTime)):wt(e,ht,"f").innerText=s?wt(e,gt,"f").live:C(i.currentTime);else{var n=C(i.duration);t||isNaN(i.duration)||n===wt(e,pt,"f").innerText?(t||n!==wt(e,pt,"f").innerText)&&(wt(e,ht,"f").innerText=s?wt(e,gt,"f").live:C(i.currentTime)):(wt(e,pt,"f").innerText=n,wt(e,pt,"f").setAttribute("aria-hidden","false"),wt(e,dt,"f").setAttribute("aria-hidden","false")),wt(e,ht,"f").innerText=C(i.currentTime)}},wt(this,mt,"f").media.ended=function(){var i=wt(e,ut,"f").activeElement(),n=isNaN(i.duration)?wt(e,ut,"f").getOptions().progress.duration:i.duration;!t&&wt(e,ut,"f").isMedia()&&(wt(e,pt,"f").innerText=C(n))},Object.keys(wt(this,mt,"f").media).forEach((function(t){wt(e,ut,"f").getElement().addEventListener(t,wt(e,mt,"f").media[t],E)})),wt(this,ut,"f").getControls().getContainer().addEventListener("controlschanged",wt(this,mt,"f").controls.controlschanged,E)}},{key:"destroy",value:function(){var e=this;Object.keys(wt(this,mt,"f").media).forEach((function(t){wt(e,ut,"f").getElement().removeEventListener(t,wt(e,mt,"f").media[t])})),wt(this,ut,"f").getControls().getContainer().removeEventListener("controlschanged",wt(this,mt,"f").controls.controlschanged),A(wt(this,ht,"f")),wt(this,ut,"f").getOptions().progress.showCurrentTimeOnly||(A(wt(this,dt,"f")),A(wt(this,pt,"f"))),A(wt(this,vt,"f"))}}]),e}();ut=new WeakMap,ht=new WeakMap,dt=new WeakMap,pt=new WeakMap,vt=new WeakMap,mt=new WeakMap,gt=new WeakMap,yt=new WeakMap,bt=new WeakMap;const _t=kt;var At,Lt,Mt,Tt,Ct,xt,Ot,Pt,St,Wt,jt=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Rt=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Nt=function(){function e(t,i,n){return s()(this,e),At.set(this,void 0),Lt.set(this,void 0),Mt.set(this,void 0),Tt.set(this,void 0),Ct.set(this,void 0),xt.set(this,{button:{},media:{},slider:{}}),Ot.set(this,void 0),Pt.set(this,void 0),St.set(this,void 0),Wt.set(this,void 0),jt(this,At,t,"f"),jt(this,Pt,t.getOptions().labels,"f"),jt(this,Ot,Rt(this,At,"f").getMedia().volume,"f"),jt(this,St,i,"f"),jt(this,Wt,n,"f"),this._keydownEvent=this._keydownEvent.bind(this),this}return r()(e,[{key:"create",value:function(){var e=this;jt(this,Mt,document.createElement("div"),"f"),Rt(this,Mt,"f").className="op-controls__volume op-control__".concat(Rt(this,St,"f")),Rt(this,Mt,"f").tabIndex=0,Rt(this,Mt,"f").setAttribute("aria-valuemin","0"),Rt(this,Mt,"f").setAttribute("aria-valuemax","100"),Rt(this,Mt,"f").setAttribute("aria-valuenow","".concat(Rt(this,Ot,"f"))),Rt(this,Mt,"f").setAttribute("aria-valuetext","".concat(Rt(this,Pt,"f").volume,": ").concat(Rt(this,Ot,"f"))),Rt(this,Mt,"f").setAttribute("aria-orientation","vertical"),Rt(this,Mt,"f").setAttribute("aria-label",Rt(this,Pt,"f").volumeSlider),jt(this,Ct,document.createElement("input"),"f"),Rt(this,Ct,"f").type="range",Rt(this,Ct,"f").className="op-controls__volume--input",Rt(this,Ct,"f").tabIndex=-1,Rt(this,Ct,"f").value=Rt(this,At,"f").getMedia().volume.toString(),Rt(this,Ct,"f").setAttribute("min","0"),Rt(this,Ct,"f").setAttribute("max","1"),Rt(this,Ct,"f").setAttribute("step","0.1"),Rt(this,Ct,"f").setAttribute("aria-label",Rt(this,Pt,"f").volumeControl),jt(this,Tt,document.createElement("progress"),"f"),Rt(this,Tt,"f").className="op-controls__volume--display",Rt(this,Tt,"f").setAttribute("max","10"),Rt(this,Tt,"f").setAttribute("role","presentation"),Rt(this,Tt,"f").value=10*Rt(this,At,"f").getMedia().volume,Rt(this,Mt,"f").appendChild(Rt(this,Ct,"f")),Rt(this,Mt,"f").appendChild(Rt(this,Tt,"f")),jt(this,Lt,document.createElement("button"),"f"),Rt(this,Lt,"f").type="button",Rt(this,Lt,"f").className="op-controls__mute op-control__".concat(Rt(this,St,"f")),Rt(this,Lt,"f").tabIndex=0,Rt(this,Lt,"f").title=Rt(this,Pt,"f").mute,Rt(this,Lt,"f").setAttribute("aria-controls",Rt(this,At,"f").id),Rt(this,Lt,"f").setAttribute("aria-pressed","false"),Rt(this,Lt,"f").setAttribute("aria-label",Rt(this,Pt,"f").mute),Rt(this,Lt,"f").innerHTML='<span class="op-sr">'.concat(Rt(this,Pt,"f").mute,"</span>");var t=function(t){var i=Rt(e,At,"f").activeElement(),n=parseFloat(t.target.value);i.volume=n,i.muted=0===i.volume,jt(e,Ot,n,"f");var s=Rt(e,At,"f").getContainer().querySelector(".op-player__unmute");!i.muted&&s&&A(s);var a=w("volumechange");Rt(e,At,"f").getElement().dispatchEvent(a)};if(Rt(this,xt,"f").media.volumechange=function(){var t,i,n,s=Rt(e,At,"f").activeElement();i=1*(t=s).volume,n=Math.floor(100*i),Rt(e,Ct,"f").value="".concat(t.volume),Rt(e,Tt,"f").value=10*i,Rt(e,Mt,"f").setAttribute("aria-valuenow","".concat(n)),Rt(e,Mt,"f").setAttribute("aria-valuetext","".concat(Rt(e,Pt,"f").volume,": ").concat(n)),function(t){var i=t.volume;i<=.5&&i>0?(Rt(e,Lt,"f").classList.remove("op-controls__mute--muted"),Rt(e,Lt,"f").classList.add("op-controls__mute--half")):0===i?(Rt(e,Lt,"f").classList.add("op-controls__mute--muted"),Rt(e,Lt,"f").classList.remove("op-controls__mute--half")):(Rt(e,Lt,"f").classList.remove("op-controls__mute--muted"),Rt(e,Lt,"f").classList.remove("op-controls__mute--half"))}(s)},Rt(this,xt,"f").media.timeupdate=function(){_(Rt(e,At,"f").getElement())&&(Rt(e,At,"f").activeElement().duration===1/0||Rt(e,At,"f").getElement().getAttribute("op-live__enabled"))},Rt(this,xt,"f").media.loadedmetadata=function(){var t=Rt(e,At,"f").activeElement();t.muted&&(t.volume=0);var i=w("volumechange");Rt(e,At,"f").getElement().dispatchEvent(i)},Rt(this,xt,"f").slider.input=t.bind(this),Rt(this,xt,"f").slider.change=t.bind(this),Rt(this,xt,"f").button.click=function(){Rt(e,Lt,"f").setAttribute("aria-pressed","true");var t=Rt(e,At,"f").activeElement();t.muted=!t.muted,t.muted?(t.volume=0,Rt(e,Lt,"f").title=Rt(e,Pt,"f").unmute,Rt(e,Lt,"f").setAttribute("aria-label",Rt(e,Pt,"f").unmute)):(t.volume=Rt(e,Ot,"f"),Rt(e,Lt,"f").title=Rt(e,Pt,"f").mute,Rt(e,Lt,"f").setAttribute("aria-label",Rt(e,Pt,"f").mute));var i=w("volumechange");Rt(e,At,"f").getElement().dispatchEvent(i)},Rt(this,Lt,"f").addEventListener("click",Rt(this,xt,"f").button.click,E),Object.keys(Rt(this,xt,"f").media).forEach((function(t){Rt(e,At,"f").getElement().addEventListener(t,Rt(e,xt,"f").media[t],E)})),Object.keys(Rt(this,xt,"f").slider).forEach((function(t){Rt(e,Ct,"f").addEventListener(t,Rt(e,xt,"f").slider[t],E)})),Rt(this,At,"f").getContainer().addEventListener("keydown",this._keydownEvent,E),!v&&!p){var i=Rt(this,At,"f").getControls().getLayer(Rt(this,Wt,"f"));i.appendChild(Rt(this,Lt,"f")),i.appendChild(Rt(this,Mt,"f"))}}},{key:"destroy",value:function(){var e=this;Rt(this,Lt,"f").removeEventListener("click",Rt(this,xt,"f").button.click),Object.keys(Rt(this,xt,"f").media).forEach((function(t){Rt(e,At,"f").getElement().removeEventListener(t,Rt(e,xt,"f").media[t])})),Object.keys(Rt(this,xt,"f").slider).forEach((function(t){Rt(e,Ct,"f").removeEventListener(t,Rt(e,xt,"f").slider[t])})),Rt(this,At,"f").getContainer().removeEventListener("keydown",this._keydownEvent),A(Rt(this,Ct,"f")),A(Rt(this,Tt,"f")),A(Rt(this,Mt,"f"))}},{key:"_keydownEvent",value:function(e){var t,i=e.which||e.keyCode||0,n=Rt(this,At,"f").activeElement();!(null===(t=null===document||void 0===document?void 0:document.activeElement)||void 0===t?void 0:t.classList.contains("op-controls__mute"))||13!==i&&32!==i||(n.muted=!n.muted,n.volume=n.muted?0:Rt(this,Ot,"f"),Rt(this,xt,"f").button.click(),e.preventDefault(),e.stopPropagation())}}]),e}();At=new WeakMap,Lt=new WeakMap,Mt=new WeakMap,Tt=new WeakMap,Ct=new WeakMap,xt=new WeakMap,Ot=new WeakMap,Pt=new WeakMap,St=new WeakMap,Wt=new WeakMap;const It=Nt;var Dt,Bt,Ft,qt,Ht,zt,Vt=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Ut=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Kt=function(){function e(t){return s()(this,e),this.events={media:{},mouse:{}},Dt.set(this,void 0),Bt.set(this,0),Ft.set(this,void 0),qt.set(this,void 0),Ht.set(this,void 0),zt.set(this,{Captions:X,Fullscreen:fe,Levels:Me,Play:Ne,Progress:Je,Settings:ct,Time:_t,Volume:It}),Vt(this,qt,t,"f"),this._setElements(),this}return r()(e,[{key:"create",value:function(){var e=this;Ut(this,qt,"f").getElement().controls=!1;var t=k(Ut(this,qt,"f").getElement());if(this._createControlsLayer(),this._buildElements(),this.events.controlschanged=function(){e.destroy(),e._setElements(),e.create()},this.events.ended=function(){Ut(e,qt,"f").getContainer().classList.remove("op-controls--hidden")},Ut(this,qt,"f").getElement().addEventListener("controlschanged",this.events.controlschanged,E),Ut(this,qt,"f").getElement().addEventListener("ended",this.events.ended,E),!Ut(this,qt,"f").getOptions().controls.alwaysVisible){var i=function(){t&&(Ut(e,qt,"f").getContainer().classList.remove("op-controls--hidden"),e._stopControlTimer())};this.events.mouse.mouseenter=function(){t&&!Ut(e,qt,"f").activeElement().paused&&(e._stopControlTimer(),Ut(e,qt,"f").activeElement().currentTime?(Ut(e,qt,"f").playBtn.setAttribute("aria-hidden",Ut(e,qt,"f").isMedia()?"false":"true"),Ut(e,qt,"f").loader.setAttribute("aria-hidden","true")):Ut(e,qt,"f").getOptions().showLoaderOnInit&&(Ut(e,qt,"f").playBtn.setAttribute("aria-hidden","true"),Ut(e,qt,"f").loader.setAttribute("aria-hidden","false")),Ut(e,qt,"f").getContainer().classList.remove("op-controls--hidden"),e._startControlTimer(2500))},this.events.mouse.mousemove=function(){t&&!Ut(e,qt,"f").activeElement().paused&&(Ut(e,qt,"f").activeElement().currentTime?(Ut(e,qt,"f").loader.setAttribute("aria-hidden","true"),Ut(e,qt,"f").playBtn.setAttribute("aria-hidden",Ut(e,qt,"f").isMedia()?"false":"true")):(Ut(e,qt,"f").playBtn.setAttribute("aria-hidden",Ut(e,qt,"f").getOptions().showLoaderOnInit?"true":"false"),Ut(e,qt,"f").loader.setAttribute("aria-hidden",Ut(e,qt,"f").getOptions().showLoaderOnInit?"false":"true")),Ut(e,qt,"f").getContainer().classList.remove("op-controls--hidden"),e._startControlTimer(2500))},this.events.mouse.mouseleave=function(){t&&!Ut(e,qt,"f").activeElement().paused&&e._startControlTimer(1e3)},this.events.media.play=function(){t&&e._startControlTimer(Ut(e,qt,"f").getOptions().hidePlayBtnTimer)},this.events.media.loadedmetadata=i.bind(this),this.events.media.pause=i.bind(this),this.events.media.waiting=i.bind(this),this.events.media.stalled=i.bind(this),this.events.media.playererror=i.bind(this),Object.keys(this.events.media).forEach((function(t){Ut(e,qt,"f").getElement().addEventListener(t,e.events.media[t],E)})),v||p?Ut(this,qt,"f").getContainer().addEventListener("click",this.events.mouse.mouseenter,E):Object.keys(this.events.mouse).forEach((function(t){Ut(e,qt,"f").getContainer().addEventListener(t,e.events.mouse[t],E)})),t&&!Ut(this,qt,"f").activeElement().paused&&this._startControlTimer(3e3)}}},{key:"destroy",value:function(){var e=this;v||p||(Object.keys(this.events.mouse).forEach((function(t){Ut(e,qt,"f").getContainer().removeEventListener(t,e.events.mouse[t])})),Object.keys(this.events.media).forEach((function(t){Ut(e,qt,"f").getElement().removeEventListener(t,e.events.media[t])})),this._stopControlTimer()),Ut(this,qt,"f").getElement().removeEventListener("controlschanged",this.events.controlschanged),Ut(this,qt,"f").getElement().removeEventListener("ended",this.events.ended),Object.keys(Ut(this,Ht,"f")).forEach((function(t){Ut(e,Ht,"f")[t].forEach((function(t){t.custom?e._destroyCustomControl(t):"function"==typeof t.destroy&&t.destroy()}))})),A(Ut(this,Ft,"f"))}},{key:"getContainer",value:function(){return Ut(this,Ft,"f")}},{key:"getLayer",value:function(e){return Ut(this,Ft,"f").querySelector(".op-controls-layer__".concat(e))||Ut(this,Ft,"f")}},{key:"_createControlsLayer",value:function(){if(!Ut(this,Ft,"f")||!Ut(this,qt,"f").getContainer().querySelector(".op-controls")){Vt(this,Ft,document.createElement("div"),"f"),Ut(this,Ft,"f").className="op-controls",Ut(this,qt,"f").getContainer().appendChild(Ut(this,Ft,"f"));var e=document.createElement("div");e.className="op-status",e.innerHTML="<span></span>",e.tabIndex=-1,e.setAttribute("aria-hidden","true"),_(Ut(this,qt,"f").getElement())&&Ut(this,Ft,"f").appendChild(e)}}},{key:"_startControlTimer",value:function(e){var t=this,i=Ut(this,qt,"f").activeElement();this._stopControlTimer(),"undefined"!=typeof window&&Vt(this,Bt,window.setTimeout((function(){if((!i.paused||!i.ended)&&k(Ut(t,qt,"f").getElement())){Ut(t,qt,"f").getContainer().classList.add("op-controls--hidden"),Ut(t,qt,"f").playBtn.setAttribute("aria-hidden","true"),t._stopControlTimer();var e=w("controlshidden");Ut(t,qt,"f").getElement().dispatchEvent(e)}}),e),"f")}},{key:"_stopControlTimer",value:function(){0!==Ut(this,Bt,"f")&&(clearTimeout(Ut(this,Bt,"f")),Vt(this,Bt,0,"f"))}},{key:"_setElements",value:function(){var e=this,t=Ut(this,qt,"f").getOptions().controls.layers;Vt(this,Ht,{"bottom-left":[],"bottom-middle":[],"bottom-right":[],left:[],main:[],middle:[],right:[],"top-left":[],"top-middle":[],"top-right":[]},"f");var i=k(Ut(this,qt,"f").getElement()),n=_(Ut(this,qt,"f").getElement()),s=Object.keys(t),a=s.find((function(e){return/^(top|bottom)/.test(e)}));this._createControlsLayer(),s.forEach((function(s){var r=s.split("-"),o=c()(r,2),f=o[0],l=o[1];if(l){Ut(e,Ft,"f").classList.contains("op-controls__stacked")||Ut(e,Ft,"f").classList.add("op-controls__stacked");var u="op-controls-layer__".concat(f);if(!Ut(e,Ft,"f").querySelector(".".concat(u))){var h=document.createElement("div");h.className=u,Ut(e,Ft,"f").appendChild(h)}}else if(a){var d="op-controls-layer__center";if(!Ut(e,Ft,"f").querySelector(".".concat(d))){var p=document.createElement("div");p.className=d,Ut(e,Ft,"f").appendChild(p)}}t[s].filter((function(e,t,i){return i.indexOf(e)===t})).forEach((function(t){var r=a&&!l?"center":f,o="".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),c=new(Ut(e,zt,"f")[o])(Ut(e,qt,"f"),l||f,r);"settings"===t&&Vt(e,Dt,c,"f"),(i||"fullscreen"!==t&&n)&&Ut(e,Ht,"f")[s].push(c)}))})),Ut(this,qt,"f").getCustomControls().forEach((function(t){var i=t.position.split("-"),n=c()(i,2),s=n[0],r=n[1],o=a&&!r?"center":s;t.layer=o,t.position=r||s,"right"===t.position?Ut(e,Ht,"f")[t.position].unshift(t):Ut(e,Ht,"f")[t.position].push(t)}))}},{key:"_buildElements",value:function(){var e=this;Object.keys(Ut(this,Ht,"f")).forEach((function(t){Ut(e,Ht,"f")[t].forEach((function(t){t.custom?e._createCustomControl(t):t.create()}))})),Object.keys(Ut(this,Ht,"f")).forEach((function(t){Ut(e,Ht,"f")[t].forEach((function(t){if((!Ut(e,qt,"f").getOptions().detachMenus||t instanceof ct)&&!t.custom&&"function"==typeof t.addSettings){var i=t.addSettings();Ut(e,Dt,"f")&&Object.keys(i).length&&Ut(e,Dt,"f").addItem(i.name,i.key,i.default,i.subitems,i.className)}}))}));var t=w("controlschanged");Ut(this,Ft,"f").dispatchEvent(t)}},{key:"_hideCustomMenu",value:function(e){var t;t&&"undefined"!=typeof window&&window.cancelAnimationFrame(t),"undefined"!=typeof window&&(t=window.requestAnimationFrame((function(){e.setAttribute("aria-hidden","true")})))}},{key:"_toggleCustomMenu",value:function(e,t,i){Ut(this,qt,"f").getContainer().querySelectorAll(".op-settings").forEach((function(e){"false"===e.getAttribute("aria-hidden")&&e.id!==t.id&&e.setAttribute("aria-hidden","true")})),t.setAttribute("aria-hidden","true"===t.getAttribute("aria-hidden")?"false":"true"),"function"==typeof i.click&&i.click(e)}},{key:"_createCustomControl",value:function(e){var t=this,i=document.createElement("button"),n=/\.(jpg|png|svg|gif)$/.test(e.icon)?'<img src="'.concat(e.icon,'">'):e.icon;if(i.className="op-controls__".concat(e.id," op-control__").concat(e.position," ").concat(e.showInAds?"":"op-control__hide-in-ad"),i.tabIndex=0,i.id=e.id,i.title=e.title,i.innerHTML=e.content||"".concat(n,' <span class="op-sr">').concat(e.title,"</span>"),e.subitems&&Array.isArray(e.subitems)&&e.subitems.length>0){var s=document.createElement("div");s.className="op-settings op-settings__custom",s.id="".concat(e.id,"-menu"),s.setAttribute("aria-hidden","true");var a=e.subitems.map((function(t){var i="";return t.icon&&(i=/\.(jpg|png|svg|gif)$/.test(t.icon)?'<img src="'.concat(t.icon,'">'):t.icon),'<div class="op-settings__menu-item" tabindex="0" '.concat(t.title?'title="'.concat(t.title,'"'):"",' role="menuitemradio">\n                    <div class="op-settings__menu-label" id="').concat(t.id,'" data-value="').concat(e.id,"-").concat(t.id,'">').concat(i," ").concat(t.label,"</div>\n                </div>")}));s.innerHTML='<div class="op-settings__menu" role="menu">'.concat(a.join(""),"</div>"),Ut(this,qt,"f").getContainer().appendChild(s),e.subitems.forEach((function(e){var t=s.querySelector("#".concat(e.id));t&&e.click&&"function"==typeof e.click&&t.addEventListener("click",e.click,E)})),i.addEventListener("click",(function(i){return t._toggleCustomMenu(i,s,e)}),E),Ut(this,qt,"f").getElement().addEventListener("controlshidden",(function(){return t._hideCustomMenu(s)}),E)}else e.click&&"function"==typeof e.click&&i.addEventListener("click",e.click,E);e.mouseenter&&"function"==typeof e.mouseenter&&i.addEventListener("mouseenter",e.mouseenter,E),e.mouseleave&&"function"==typeof e.mouseleave&&i.addEventListener("mouseenter",e.mouseleave,E),e.keydown&&"function"==typeof e.keydown&&i.addEventListener("keydown",e.keydown,E),e.blur&&"function"==typeof e.blur&&i.addEventListener("blur",e.blur,E),e.focus&&"function"==typeof e.focus&&i.addEventListener("focus",e.focus,E),e.layer&&("main"===e.layer?Ut(this,qt,"f").getContainer().appendChild(i):this.getLayer(e.layer).appendChild(i)),e.init&&"function"==typeof e.init&&e.init(Ut(this,qt,"f"))}},{key:"_destroyCustomControl",value:function(e){var t=this,i=e.title.toLowerCase().replace(" ","-"),n=this.getContainer().querySelector(".op-controls__".concat(i));if(n){if(e.subitems&&Array.isArray(e.subitems)&&e.subitems.length>0){var s=Ut(this,qt,"f").getContainer().querySelector("#".concat(e.id,"-menu"));s&&(e.subitems.forEach((function(e){var t=s.querySelector("#".concat(e.id));t&&e.click&&"function"==typeof e.click&&t.removeEventListener("click",e.click)})),n.removeEventListener("click",(function(i){return t._toggleCustomMenu(i,s,e)})),Ut(this,qt,"f").getElement().removeEventListener("controlshidden",(function(){return t._hideCustomMenu(s)})),A(s))}e.click&&"function"==typeof e.click&&n.removeEventListener("click",e.click),e.mouseenter&&"function"==typeof e.mouseenter&&n.removeEventListener("mouseenter",e.mouseenter),e.mouseleave&&"function"==typeof e.mouseleave&&n.removeEventListener("mouseenter",e.mouseleave),e.keydown&&"function"==typeof e.keydown&&n.removeEventListener("keydown",e.keydown),e.blur&&"function"==typeof e.blur&&n.removeEventListener("blur",e.blur),e.focus&&"function"==typeof e.focus&&n.removeEventListener("focus",e.focus),A(n),e.destroy&&"function"==typeof e.destroy&&e.destroy(Ut(this,qt,"f"))}}}]),e}();Dt=new WeakMap,Bt=new WeakMap,Ft=new WeakMap,qt=new WeakMap,Ht=new WeakMap,zt=new WeakMap;const Gt=Kt;var Xt,Qt=i(506),$t=i.n(Qt),Jt=i(205),Yt=i.n(Jt),Zt=i(585),ei=i.n(Zt),ti=i(754),ii=i.n(ti),ni=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},si=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},ai=function(){function e(t,i){s()(this,e),Xt.set(this,void 0),this.element=t,this.media=i,this.promise=new Promise((function(e){e({})}))}return r()(e,[{key:"instance",get:function(){return si(this,Xt,"f")},set:function(e){ni(this,Xt,e,"f")}},{key:"play",value:function(){return this.element.play()}},{key:"pause",value:function(){this.element.pause()}},{key:"volume",get:function(){return this.element.volume},set:function(e){this.element.volume=e}},{key:"muted",get:function(){return this.element.muted},set:function(e){this.element.muted=e}},{key:"playbackRate",get:function(){return this.element.playbackRate},set:function(e){this.element.playbackRate=e}},{key:"defaultPlaybackRate",get:function(){return this.element.defaultPlaybackRate},set:function(e){this.element.defaultPlaybackRate=e}},{key:"currentTime",get:function(){return this.element.currentTime},set:function(e){this.element.currentTime=e}},{key:"duration",get:function(){return this.element.duration}},{key:"paused",get:function(){return this.element.paused}},{key:"ended",get:function(){return this.element.ended}}]),e}();Xt=new WeakMap;const ri=ai;function oi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=ii()(e);if(t){var s=ii()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return ei()(this,i)}}var fi,li,ci,ui=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},hi=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},di=function(e){Yt()(n,e);var i=oi(n);function n(e,t,a){var r;return s()(this,n),r=i.call(this,e,t),fi.set($t()(r),void 0),li.set($t()(r),{}),ci.set($t()(r),{}),ui($t()(r),ci,a,"f"),r.promise="undefined"==typeof dashjs?L("https://cdn.dashjs.org/latest/dash.all.min.js"):new Promise((function(e){e({})})),r._assign=r._assign.bind($t()(r)),r.promise.then((function(){ui($t()(r),fi,dashjs.MediaPlayer().create(),"f"),r.instance=hi($t()(r),fi,"f")})),ei()(r,$t()(r))}return r()(n,[{key:"canPlayType",value:function(e){return b&&"application/dash+xml"===e}},{key:"load",value:function(){var e=this;this._preparePlayer(),hi(this,fi,"f").attachSource(this.media.src);var t=w("loadedmetadata");this.element.dispatchEvent(t),hi(this,li,"f")||(ui(this,li,dashjs.MediaPlayer.events,"f"),Object.keys(hi(this,li,"f")).forEach((function(t){hi(e,fi,"f").on(hi(e,li,"f")[t],e._assign)})))}},{key:"destroy",value:function(){this._revoke()}},{key:"src",set:function(e){var t=this;ce(e)&&(this._revoke(),ui(this,fi,dashjs.MediaPlayer().create(),"f"),this._preparePlayer(),hi(this,fi,"f").attachSource(e.src),ui(this,li,dashjs.MediaPlayer.events,"f"),Object.keys(hi(this,li,"f")).forEach((function(e){hi(t,fi,"f").on(hi(t,li,"f")[e],t._assign)})))}},{key:"levels",get:function(){var e=[];if(hi(this,fi,"f")){var t=hi(this,fi,"f").getBitrateInfoListFor("video");t.length&&t.forEach((function(i){if(t[i]){var n=t[i],s=n.height,a=n.name,r={height:s,id:"".concat(i),label:a||null};e.push(r)}}))}return e}},{key:"level",get:function(){return hi(this,fi,"f")?hi(this,fi,"f").getQualityFor("video"):-1},set:function(e){0===e?hi(this,fi,"f").setAutoSwitchQuality(!0):(hi(this,fi,"f").setAutoSwitchQuality(!1),hi(this,fi,"f").setQualityFor("video",e))}},{key:"_assign",value:function(e){if("error"===e.type){var t=w("playererror",{detail:{message:e,type:"M(PEG)-DASH"}});this.element.dispatchEvent(t)}else{var i=w(e.type,{detail:e});this.element.dispatchEvent(i)}}},{key:"_revoke",value:function(){var e=this;hi(this,li,"f")&&(Object.keys(hi(this,li,"f")).forEach((function(t){hi(e,fi,"f").off(hi(e,li,"f")[t],e._assign)})),ui(this,li,[],"f")),hi(this,fi,"f").reset()}},{key:"_preparePlayer",value:function(){void 0===hi(this,fi,"f").getDebug().setLogToBrowserConsole?hi(this,fi,"f").updateSettings({debug:{logLevel:dashjs.Debug.LOG_LEVEL_NONE},streaming:{fastSwitchEnabled:!0,scheduleWhilePaused:!1}}):(hi(this,fi,"f").getDebug().setLogToBrowserConsole(!1),hi(this,fi,"f").setScheduleWhilePaused(!1),hi(this,fi,"f").setFastSwitchEnabled(!0)),hi(this,fi,"f").initialize(),hi(this,fi,"f").attachView(this.element),hi(this,fi,"f").setAutoPlay(!1),hi(this,ci,"f")&&"object"===t()(hi(this,ci,"f").drm)&&Object.keys(hi(this,ci,"f").drm).length&&(hi(this,fi,"f").setProtectionData(hi(this,ci,"f").drm),hi(this,ci,"f").robustnessLevel&&hi(this,ci,"f").robustnessLevel&&hi(this,fi,"f").getProtectionController().setRobustnessLevel(hi(this,ci,"f").robustnessLevel))}}]),n}(ri);fi=new WeakMap,li=new WeakMap,ci=new WeakMap;const pi=di;function vi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=ii()(e);if(t){var s=ii()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return ei()(this,i)}}var mi,gi,yi,bi=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Ei=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},wi=function(e){Yt()(i,e);var t=vi(i);function i(e,n,a){var r;return s()(this,i),r=t.call(this,e,n),mi.set($t()(r),void 0),gi.set($t()(r),{}),yi.set($t()(r),void 0),bi($t()(r),yi,a,"f"),r.element=e,r.media=n,r.promise="undefined"==typeof flvjs?L("https://cdn.jsdelivr.net/npm/flv.js@latest/dist/flv.min.js"):new Promise((function(e){e({})})),r._create=r._create.bind($t()(r)),r.promise.then(r._create),ei()(r,$t()(r))}return r()(i,[{key:"canPlayType",value:function(e){return b&&("video/x-flv"===e||"video/flv"===e)}},{key:"load",value:function(){var e=this;Ei(this,mi,"f").unload(),Ei(this,mi,"f").detachMediaElement(),Ei(this,mi,"f").attachMediaElement(this.element),Ei(this,mi,"f").load();var t=w("loadedmetadata");this.element.dispatchEvent(t),Ei(this,gi,"f")||(bi(this,gi,flvjs.Events,"f"),Object.keys(Ei(this,gi,"f")).forEach((function(t){Ei(e,mi,"f").on(Ei(e,gi,"f")[t],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e._assign(Ei(e,gi,"f")[t],n)}))})))}},{key:"destroy",value:function(){this._revoke()}},{key:"src",set:function(e){ue(e)&&(this._revoke(),this._create())}},{key:"levels",get:function(){var e=this,t=[];return Ei(this,mi,"f")&&Ei(this,mi,"f").levels&&Ei(this,mi,"f").levels.length&&Object.keys(Ei(this,mi,"f").levels).forEach((function(i){var n=Ei(e,mi,"f").levels[i],s={height:n.height,id:i,label:n.name||null};t.push(s)})),t}},{key:"level",get:function(){return Ei(this,mi,"f")?Ei(this,mi,"f").currentLevel:-1},set:function(e){Ei(this,mi,"f").currentLevel=e}},{key:"_create",value:function(){var e,t,i,n,s=this,a=null===(e=Ei(this,yi,"f"))||void 0===e?void 0:e.configs;null===(t=Ei(this,yi,"f"))||void 0===t||delete t.configs,flvjs.LoggingControl.enableDebug=(null===(i=Ei(this,yi,"f"))||void 0===i?void 0:i.debug)||!1,flvjs.LoggingControl.enableVerbose=(null===(n=Ei(this,yi,"f"))||void 0===n?void 0:n.debug)||!1;var r=Object.assign(Object.assign({},Ei(this,yi,"f")||{}),{type:"flv",url:this.media.src});bi(this,mi,flvjs.createPlayer(r,a),"f"),this.instance=Ei(this,mi,"f"),Ei(this,gi,"f")||(bi(this,gi,flvjs.Events,"f"),Object.keys(Ei(this,gi,"f")).forEach((function(e){Ei(s,mi,"f").on(Ei(s,gi,"f")[e],(function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return s._assign(Ei(s,gi,"f")[e],i)}))})))}},{key:"_assign",value:function(e,t){if("error"===e){var i=w("playererror",{detail:{data:t,message:"".concat(t[0],": ").concat(t[1]," ").concat(t[2].msg),type:"FLV"}});this.element.dispatchEvent(i)}else{var n=w(e,{detail:{data:t}});this.element.dispatchEvent(n)}}},{key:"_revoke",value:function(){Ei(this,mi,"f").destroy(),bi(this,mi,null,"f")}}]),i}(ri);mi=new WeakMap,gi=new WeakMap,yi=new WeakMap;const ki=wi;function _i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=ii()(e);if(t){var s=ii()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return ei()(this,i)}}var Ai,Li,Mi,Ti,Ci,xi,Oi=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Pi=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Si=function(e){Yt()(i,e);var t=_i(i);function i(e,n){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;return s()(this,i),a=t.call(this,e,n),Ai.set($t()(a),void 0),Li.set($t()(a),{}),Mi.set($t()(a),0),Ti.set($t()(a),0),Ci.set($t()(a),void 0),xi.set($t()(a),void 0),Oi($t()(a),Ci,o||{},"f"),a.element=e,a.media=n,Oi($t()(a),xi,r,"f"),a.promise="undefined"==typeof Hls?L("https://cdn.jsdelivr.net/npm/hls.js@latest/dist/hls.min.js"):new Promise((function(e){e({})})),a._create=a._create.bind($t()(a)),a._revoke=a._revoke.bind($t()(a)),a._play=a._play.bind($t()(a)),a._pause=a._pause.bind($t()(a)),a.promise.then(a._create),ei()(a,$t()(a))}return r()(i,[{key:"canPlayType",value:function(e){return function(){if("undefined"==typeof window)return!1;var e=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer||window.WebKitSourceBuffer,i=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!i&&!!n&&!y}()&&"application/x-mpegURL"===e}},{key:"load",value:function(){var e=this;Pi(this,Ai,"f")&&(Pi(this,Ai,"f").detachMedia(),Pi(this,Ai,"f").loadSource(this.media.src),Pi(this,Ai,"f").attachMedia(this.element));var t=w("loadedmetadata");this.element.dispatchEvent(t),Pi(this,Li,"f")||(Oi(this,Li,Hls.Events,"f"),Object.keys(Pi(this,Li,"f")).forEach((function(t){Pi(e,Ai,"f").on(Pi(e,Li,"f")[t],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e._assign(Pi(e,Li,"f")[t],n)}))})))}},{key:"destroy",value:function(){this._revoke()}},{key:"src",set:function(e){var t=this;le(e)&&(this._revoke(),Oi(this,Ai,new Hls(Pi(this,Ci,"f")),"f"),Pi(this,Ai,"f").loadSource(e.src),Pi(this,Ai,"f").attachMedia(this.element),Oi(this,Li,Hls.Events,"f"),Object.keys(Pi(this,Li,"f")).forEach((function(e){Pi(t,Ai,"f").on(Pi(t,Li,"f")[e],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return t._assign(Pi(t,Li,"f")[e],n)}))})))}},{key:"levels",get:function(){var e=this,t=[];return Pi(this,Ai,"f")&&Pi(this,Ai,"f").levels&&Pi(this,Ai,"f").levels.length&&Object.keys(Pi(this,Ai,"f").levels).forEach((function(i){var n=Pi(e,Ai,"f").levels[i],s={height:n.height,id:i,label:n.name||null};t.push(s)})),t}},{key:"level",get:function(){return Pi(this,Ai,"f")?Pi(this,Ai,"f").currentLevel:-1},set:function(e){Pi(this,Ai,"f").currentLevel=e}},{key:"_create",value:function(){var e=this,t=!("auto"!==this.element.preload&&!Pi(this,xi,"f"));Pi(this,Ci,"f").autoStartLoad=t,Oi(this,Ai,new Hls(Pi(this,Ci,"f")),"f"),this.instance=Pi(this,Ai,"f"),Oi(this,Li,Hls.Events,"f"),Object.keys(Pi(this,Li,"f")).forEach((function(t){Pi(e,Ai,"f").on(Pi(e,Li,"f")[t],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e._assign(Pi(e,Li,"f")[t],n)}))})),t||(this.element.addEventListener("play",this._play,E),this.element.addEventListener("pause",this._pause,E))}},{key:"_assign",value:function(e,t){if("hlsError"===e){var i=w("playererror",{detail:{data:t,message:t[1].details,type:"HLS"}});this.element.dispatchEvent(i);var n=t[1].type,s=t[1].fatal,a=t[1];if(s)switch(n){case"mediaError":var r=(new Date).getTime();if(!Pi(this,Mi,"f")||r-Pi(this,Mi,"f")>3e3)Oi(this,Mi,(new Date).getTime(),"f"),Pi(this,Ai,"f").recoverMediaError();else if(!Pi(this,Ti,"f")||r-Pi(this,Ti,"f")>3e3)Oi(this,Ti,(new Date).getTime(),"f"),console.warn("Attempting to swap Audio Codec and recover from media error"),Pi(this,Ai,"f").swapAudioCodec(),Pi(this,Ai,"f").recoverMediaError();else{console.error("Cannot recover, last media error recovery failed");var o=w(n,{detail:{data:a}});this.element.dispatchEvent(o)}break;case"networkError":console.error("Network error");var f=w(n,{detail:{data:a}});this.element.dispatchEvent(f);break;default:Pi(this,Ai,"f").destroy();var l=w(n,{detail:{data:a}});this.element.dispatchEvent(l)}else{var c=w(n,{detail:{data:a}});this.element.dispatchEvent(c)}}else{var u=t[1];if("hlsLevelLoaded"===e&&!0===u.live){this.element.setAttribute("op-live__enabled","true");var h=w("timeupdate");this.element.dispatchEvent(h)}else if("hlsLevelUpdated"===e&&!0===u.live&&u.totalduration>120){this.element.setAttribute("op-dvr__enabled","true");var d=w("timeupdate");this.element.dispatchEvent(d)}else if("hlsFragParsingMetadata"===e){var p=w("metadataready",{detail:{data:t[1]}});this.element.dispatchEvent(p)}var v=w(e,{detail:{data:t[1]}});this.element.dispatchEvent(v)}}},{key:"_revoke",value:function(){var e=this;Pi(this,Ai,"f")&&Pi(this,Ai,"f").stopLoad(),Pi(this,Li,"f")&&Object.keys(Pi(this,Li,"f")).forEach((function(t){Pi(e,Ai,"f").off(Pi(e,Li,"f")[t],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e._assign(Pi(e,Li,"f")[t],n)}))})),this.element.removeEventListener("play",this._play),this.element.removeEventListener("pause",this._pause),Pi(this,Ai,"f")&&(Pi(this,Ai,"f").destroy(),Oi(this,Ai,null,"f"))}},{key:"_play",value:function(){Pi(this,Ai,"f")&&Pi(this,Ai,"f").startLoad()}},{key:"_pause",value:function(){Pi(this,Ai,"f")&&Pi(this,Ai,"f").stopLoad()}}]),i}(ri);Ai=new WeakMap,Li=new WeakMap,Mi=new WeakMap,Ti=new WeakMap,Ci=new WeakMap,xi=new WeakMap;const Wi=Si;function ji(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=ii()(e);if(t){var s=ii()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return ei()(this,i)}}var Ri,Ni,Ii,Di,Bi,Fi,qi=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Hi=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},zi=function(e){Yt()(i,e);var t=ji(i);function i(e,n){var a;if(s()(this,i),a=t.call(this,e,n),Ri.set($t()(a),void 0),Ni.set($t()(a),[]),Ii.set($t()(a),!1),Di.set($t()(a),0),Bi.set($t()(a),!1),Fi.set($t()(a),void 0),!_(e)&&!k(e))throw new TypeError("Native method only supports video/audio tags");return a._clearTimeout=a._clearTimeout.bind($t()(a)),a._setTimeout=a._setTimeout.bind($t()(a)),a._dispatchError=a._dispatchError.bind($t()(a)),a._isDvrEnabled=a._isDvrEnabled.bind($t()(a)),a._readMediadataInfo=a._readMediadataInfo.bind($t()(a)),qi($t()(a),Ii,le(n),"f"),a.element.addEventListener("playing",a._clearTimeout,E),a.element.addEventListener("stalled",a._setTimeout,E),a.element.addEventListener("error",a._dispatchError,E),a.element.addEventListener("loadeddata",a._isDvrEnabled,E),a.element.textTracks.addEventListener("addtrack",a._readMediadataInfo,E),ei()(a,$t()(a))}return r()(i,[{key:"canPlayType",value:function(e){return!!this.element.canPlayType(e).replace("no","")}},{key:"load",value:function(){this.element.load()}},{key:"destroy",value:function(){return this.element.removeEventListener("playing",this._clearTimeout),this.element.removeEventListener("stalled",this._setTimeout),this.element.removeEventListener("error",this._dispatchError),this.element.removeEventListener("loadeddata",this._isDvrEnabled),this.element.textTracks.removeEventListener("addtrack",this._readMediadataInfo),this}},{key:"levels",get:function(){if(!Hi(this,Ni,"f").length)for(var e=this.element.querySelectorAll("source[title]"),t=0,i=e.length;t<i;++t){var n={height:0,id:"".concat(t),label:e[t].getAttribute("title")||""};Hi(this,Ni,"f").push(n)}return Hi(this,Ni,"f")}},{key:"level",get:function(){var e;return(null===(e=Hi(this,Ri,"f"))||void 0===e?void 0:e.id)||"-1"},set:function(e){var t=Hi(this,Ni,"f").findIndex((function(t){return t.id===e}));if(t>-1){qi(this,Ri,this.levels[t],"f");for(var i=this.element.querySelectorAll("source[title]"),n=0,s=i.length;n<s;++n){var a=i[n].getAttribute("src");a&&parseInt(Hi(this,Ri,"f").id,10)===n&&(this.element.src=a)}}}},{key:"src",set:function(e){this.element.src=e.src}},{key:"_isDvrEnabled",value:function(){var e=this.element.seekable.end(this.element.seekable.length-1)-this.element.seekable.start(0);if(Hi(this,Ii,"f")&&e>120&&!this.element.getAttribute("op-dvr__enabled")){this.element.setAttribute("op-dvr__enabled","true");var t=w("timeupdate");this.element.dispatchEvent(t)}}},{key:"_readMediadataInfo",value:function(e){var t,i=this,n=e;"metadata"===(null===(t=null==n?void 0:n.track)||void 0===t?void 0:t.kind)&&(n.track.mode="hidden",n.track.addEventListener("cuechange",(function(e){var t=e.target,n=t.activeCues?t.activeCues[0]:null;if(n){var s=w("metadataready",{detail:n});i.element.dispatchEvent(s)}}),E))}},{key:"_setTimeout",value:function(){var e=this;Hi(this,Bi,"f")||void 0===window||(qi(this,Bi,!0,"f"),qi(this,Fi,window.setInterval((function(){var t;if(Hi(e,Di,"f")>=30){clearInterval(Hi(e,Fi,"f"));var i="Media download failed part-way due to a network error",n=w("playererror",{detail:{data:{message:i,error:2},message:i,type:"HTML5"}});e.element.dispatchEvent(n),qi(e,Di,0,"f"),qi(e,Bi,!1,"f")}else qi(e,Di,(t=Hi(e,Di,"f"),++t),"f")}),1e3),"f"))}},{key:"_clearTimeout",value:function(){Hi(this,Fi,"f")&&(clearInterval(Hi(this,Fi,"f")),qi(this,Di,0,"f"),qi(this,Bi,!1,"f"))}},{key:"_dispatchError",value:function(e){var t,i=e.target,n=null==i?void 0:i.error;switch(null==n?void 0:n.code){case null==n?void 0:n.MEDIA_ERR_ABORTED:t="Media playback aborted";break;case null==n?void 0:n.MEDIA_ERR_NETWORK:t="Media download failed part-way due to a network error";break;case null==n?void 0:n.MEDIA_ERR_DECODE:t="Media playback aborted due to a corruption problem or because the\n                    media used features your browser did not support.";break;case null==n?void 0:n.MEDIA_ERR_SRC_NOT_SUPPORTED:t="Media could not be loaded, either because the server or network failed\n                    or because the format is not supported.";break;default:t="Unknown error occurred."}var s=w("playererror",{detail:{data:Object.assign(Object.assign({},e),{message:t,error:null==n?void 0:n.code}),message:t,type:"HTML5"}});this.element.dispatchEvent(s)}}]),i}(ri);Ri=new WeakMap,Ni=new WeakMap,Ii=new WeakMap,Di=new WeakMap,Bi=new WeakMap,Fi=new WeakMap;const Vi=zi;var Ui,Ki,Gi,Xi,Qi,$i,Ji,Yi,Zi,en=function(e,t,i,n){return new(i||(i=Promise))((function(s,a){function r(e){try{f(n.next(e))}catch(e){a(e)}}function o(e){try{f(n.throw(e))}catch(e){a(e)}}function f(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,o)}f((n=n.apply(e,t||[])).next())}))},tn=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},nn=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},sn=function(){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0;return s()(this,e),Ui.set(this,void 0),Ki.set(this,void 0),Gi.set(this,void 0),Xi.set(this,void 0),Qi.set(this,void 0),$i.set(this,void 0),Ji.set(this,!1),Yi.set(this,{media:{},optionsKey:{},rules:[]}),Zi.set(this,void 0),tn(this,Ui,t,"f"),tn(this,Qi,i,"f"),tn(this,Gi,this._getMediaFiles(),"f"),tn(this,Yi,a,"f"),tn(this,$i,n,"f"),this}return r()(e,[{key:"canPlayType",value:function(e){return nn(this,Ki,"f").canPlayType(e)}},{key:"load",value:function(){return en(this,void 0,void 0,f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!nn(this,Ji,"f")){e.next=2;break}return e.abrupt("return");case 2:if(tn(this,Ji,!0,"f"),nn(this,Gi,"f").length){e.next=5;break}throw new TypeError("Media not set");case 5:if(nn(this,Ki,"f")&&"function"==typeof nn(this,Ki,"f").destroy&&(1===nn(this,Gi,"f").length&&nn(this,Gi,"f")[0].src===nn(this,Ki,"f").media.src||nn(this,Ki,"f").destroy()),nn(this,Gi,"f").some((function(e){try{tn(t,Ki,t._invoke(e),"f")}catch(i){tn(t,Ki,new Vi(nn(t,Ui,"f"),e),"f")}return nn(t,Ki,"f").canPlayType(e.type)})),e.prev=7,null!==nn(this,Ki,"f")){e.next=10;break}throw new TypeError("Media cannot be played with any valid media type");case 10:return e.next=12,nn(this,Ki,"f").promise;case 12:nn(this,Ki,"f").load(),e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(7),nn(this,Ki,"f")&&nn(this,Ki,"f").destroy(),e.t0;case 19:case"end":return e.stop()}}),e,this,[[7,15]])})))}},{key:"play",value:function(){return en(this,void 0,void 0,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(nn(this,Ji,"f")){e.next=7;break}return tn(this,Ji,!0,"f"),e.next=4,this.load();case 4:tn(this,Ji,!1,"f"),e.next=9;break;case 7:return e.next=9,nn(this,Ki,"f").promise;case 9:return tn(this,Xi,nn(this,Ki,"f").play(),"f"),e.abrupt("return",nn(this,Xi,"f"));case 11:case"end":return e.stop()}}),e,this)})))}},{key:"pause",value:function(){return en(this,void 0,void 0,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===nn(this,Xi,"f")){e.next=3;break}return e.next=3,nn(this,Xi,"f");case 3:nn(this,Ki,"f").pause();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"destroy",value:function(){nn(this,Ki,"f")&&nn(this,Ki,"f").destroy()}},{key:"src",get:function(){return nn(this,Gi,"f")},set:function(e){"string"==typeof e?nn(this,Gi,"f").push({src:e,type:he(e,nn(this,Ui,"f"))}):Array.isArray(e)?tn(this,Gi,e,"f"):"object"===t()(e)&&nn(this,Gi,"f").push(e),tn(this,Gi,nn(this,Gi,"f").filter((function(e){return e.src})),"f"),nn(this,Gi,"f").length>0?(nn(this,Ui,"f").src&&nn(this,Ui,"f").setAttribute("data-op-file",nn(this,Gi,"f")[0].src),nn(this,Ui,"f").src=nn(this,Gi,"f")[0].src,tn(this,Zi,nn(this,Gi,"f")[0],"f"),nn(this,Ki,"f")&&(nn(this,Ki,"f").src=nn(this,Gi,"f")[0])):nn(this,Ui,"f").src=""}},{key:"current",get:function(){return nn(this,Zi,"f")}},{key:"mediaFiles",get:function(){return nn(this,Gi,"f")},set:function(e){tn(this,Gi,e,"f")}},{key:"volume",get:function(){return nn(this,Ki,"f")?nn(this,Ki,"f").volume:nn(this,Ui,"f").volume},set:function(e){nn(this,Ki,"f")&&(nn(this,Ki,"f").volume=e)}},{key:"muted",get:function(){return nn(this,Ki,"f")?nn(this,Ki,"f").muted:nn(this,Ui,"f").muted},set:function(e){nn(this,Ki,"f")&&(nn(this,Ki,"f").muted=e)}},{key:"playbackRate",get:function(){return nn(this,Ki,"f")?nn(this,Ki,"f").playbackRate:nn(this,Ui,"f").playbackRate},set:function(e){nn(this,Ki,"f")&&(nn(this,Ki,"f").playbackRate=e)}},{key:"defaultPlaybackRate",get:function(){return nn(this,Ki,"f")?nn(this,Ki,"f").defaultPlaybackRate:nn(this,Ui,"f").defaultPlaybackRate},set:function(e){nn(this,Ki,"f")&&(nn(this,Ki,"f").defaultPlaybackRate=e)}},{key:"currentTime",get:function(){return nn(this,Ki,"f")?nn(this,Ki,"f").currentTime:nn(this,Ui,"f").currentTime},set:function(e){nn(this,Ki,"f")&&(nn(this,Ki,"f").currentTime=e)}},{key:"duration",get:function(){var e=nn(this,Ki,"f")?nn(this,Ki,"f").duration:nn(this,Ui,"f").duration;return e===1/0&&nn(this,Ui,"f").seekable&&nn(this,Ui,"f").seekable.length?nn(this,Ui,"f").seekable.end(0):e}},{key:"paused",get:function(){return nn(this,Ki,"f")?nn(this,Ki,"f").paused:nn(this,Ui,"f").paused}},{key:"ended",get:function(){return nn(this,Ki,"f")?nn(this,Ki,"f").ended:nn(this,Ui,"f").ended}},{key:"loaded",get:function(){return nn(this,Ji,"f")},set:function(e){tn(this,Ji,e,"f")}},{key:"level",get:function(){return nn(this,Ki,"f")?nn(this,Ki,"f").level:-1},set:function(e){nn(this,Ki,"f")&&(nn(this,Ki,"f").level=e)}},{key:"levels",get:function(){return nn(this,Ki,"f")?nn(this,Ki,"f").levels:[]}},{key:"instance",get:function(){return nn(this,Ki,"f")?nn(this,Ki,"f").instance:null}},{key:"_getMediaFiles",value:function(){var e=[],t=nn(this,Ui,"f").querySelectorAll("source"),i=nn(this,Ui,"f").src;i&&e.push({src:i,type:nn(this,Ui,"f").getAttribute("type")||he(i,nn(this,Ui,"f"))});for(var n=0,s=t.length;n<s;n++){var a=t[n],r=a.src;e.push({src:r,type:a.getAttribute("type")||he(r,nn(this,Ui,"f"))}),0===n&&tn(this,Zi,e[0],"f")}return e.length||e.push({src:"",type:he("",nn(this,Ui,"f"))}),e}},{key:"_invoke",value:function(e){var t=this,i=nn(this,Ui,"f").canPlayType("application/vnd.apple.mpegurl")||nn(this,Ui,"f").canPlayType("application/x-mpegURL");tn(this,Zi,e,"f");var n,s=!1;if(Object.keys(nn(this,Qi,"f").controls.layers).forEach((function(e){nn(t,Qi,"f").controls.layers[e].indexOf("levels")>-1&&(s=!0)})),Object.keys(nn(this,Yi,"f").media).length)return nn(this,Yi,"f").rules.forEach((function(i){var s=i(e.src);if(s){var a=nn(t,Yi,"f").media[s],r=nn(t,Qi,"f")[nn(t,Yi,"f").optionsKey[s]]||void 0;n=a(nn(t,Ui,"f"),e,nn(t,$i,"f"),r)}})),n?(n.create(),n):new Vi(nn(this,Ui,"f"),e);if(le(e)){if(i&&nn(this,Qi,"f").forceNative&&!s)return new Vi(nn(this,Ui,"f"),e);var a=nn(this,Qi,"f")&&nn(this,Qi,"f").hls?nn(this,Qi,"f").hls:void 0;return new Wi(nn(this,Ui,"f"),e,nn(this,$i,"f"),a)}if(ce(e)){var r=nn(this,Qi,"f")&&nn(this,Qi,"f").dash?nn(this,Qi,"f").dash:void 0;return new pi(nn(this,Ui,"f"),e,r)}if(ue(e)){var o=nn(this,Qi,"f")&&nn(this,Qi,"f").flv?nn(this,Qi,"f").flv:{debug:!1,type:"flv",url:e.src};return new ki(nn(this,Ui,"f"),e,o)}return new Vi(nn(this,Ui,"f"),e)}}]),e}();Ui=new WeakMap,Ki=new WeakMap,Gi=new WeakMap,Xi=new WeakMap,Qi=new WeakMap,$i=new WeakMap,Ji=new WeakMap,Yi=new WeakMap,Zi=new WeakMap;const an=sn;var rn,on,fn,ln,cn,un,hn,dn,pn,vn,mn,gn,yn,bn,En,wn,kn,_n,An,Ln,Mn,Tn,Cn,xn,On,Pn,Sn,Wn,jn,Rn,Nn,In=function(e,t,i,n){return new(i||(i=Promise))((function(s,a){function r(e){try{f(n.next(e))}catch(e){a(e)}}function o(e){try{f(n.throw(e))}catch(e){a(e)}}function f(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,o)}f((n=n.apply(e,t||[])).next())}))},Dn=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Bn=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Fn=function(){function e(t,i,n,a,r){var o=this;s()(this,e),rn.set(this,!1),on.set(this,!1),fn.set(this,!1),ln.set(this,!1),cn.set(this,0),un.set(this,void 0),hn.set(this,!1),dn.set(this,0),pn.set(this,0),vn.set(this,null),mn.set(this,void 0),gn.set(this,void 0),yn.set(this,void 0),bn.set(this,[]),En.set(this,void 0),wn.set(this,void 0),kn.set(this,void 0),_n.set(this,void 0),An.set(this,void 0),Ln.set(this,void 0),Mn.set(this,void 0),Tn.set(this,!1),Cn.set(this,!1),xn.set(this,!1),On.set(this,void 0),Pn.set(this,0),Sn.set(this,void 0),Wn.set(this,void 0),jn.set(this,0),Rn.set(this,[]),Nn.set(this,!1),this.loadedAd=!1;var f={autoPlayAdBreaks:!0,customClick:{enabled:!1,label:"Click here for more info"},debug:!1,enablePreloading:!1,language:"en",loop:!1,numRedirects:4,publisherId:null,sdkPath:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",sessionId:null,src:[],vpaidMode:"enabled"};if(Dn(this,mn,t,"f"),Dn(this,En,i,"f"),Dn(this,gn,t.getMedia(),"f"),Dn(this,yn,t.getElement(),"f"),Dn(this,Tn,n||!1,"f"),Dn(this,hn,t.getElement().muted,"f"),Dn(this,Cn,a||!1,"f"),Dn(this,On,Object.assign(Object.assign({},f),r),"f"),r){["customClick"].forEach((function(e){Bn(o,On,"f")[e]=r[e]&&Object.keys(r[e]).length?Object.assign(Object.assign({},f[e]),r[e]):f[e]}))}Dn(this,xn,!1,"f"),Dn(this,Sn,Bn(this,yn,"f").volume,"f"),Dn(this,un,Bn(this,Sn,"f"),"f");var l=Bn(this,On,"f").debug&&Bn(this,On,"f").sdkPath?Bn(this,On,"f").sdkPath.replace(/(\.js$)/,"_debug.js"):Bn(this,On,"f").sdkPath;return this._handleClickInContainer=this._handleClickInContainer.bind(this),this.load=this.load.bind(this),this._loaded=this._loaded.bind(this),this._error=this._error.bind(this),this._assign=this._assign.bind(this),this._contentLoadedAction=this._contentLoadedAction.bind(this),this._loadedMetadataHandler=this._loadedMetadataHandler.bind(this),this._contentEndedListener=this._contentEndedListener.bind(this),this.resizeAds=this.resizeAds.bind(this),this._handleResizeAds=this._handleResizeAds.bind(this),this._onContentPauseRequested=this._onContentPauseRequested.bind(this),this._onContentResumeRequested=this._onContentResumeRequested.bind(this),Dn(this,wn,!l||"undefined"!=typeof google&&void 0!==google.ima?new Promise((function(e){e({})})):L(l),"f"),Bn(this,wn,"f").then(this.load).catch((function(e){var t="Ad script could not be loaded; please check if you have an AdBlock";t+="turned on, or if you provided a valid URL is correct",console.error("Ad error: ".concat(t,"."));var i=w("playererror",{detail:{data:e,message:t,type:"Ads"}});Bn(o,yn,"f").dispatchEvent(i)})),this}return r()(e,[{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.loadedAd&&(google||google.ima||Bn(this,On,"f").autoPlayAdBreaks||e)){this.loadedAd=!0;var t=Bn(this,mn,"f").getContainer().querySelector(".op-ads");t&&t.parentNode&&t.parentNode.removeChild(t),Dn(this,ln,!0,"f"),Dn(this,_n,document.createElement("div"),"f"),Bn(this,_n,"f").className="op-ads",Bn(this,_n,"f").tabIndex=-1,Bn(this,yn,"f").parentElement&&Bn(this,yn,"f").parentElement.insertBefore(Bn(this,_n,"f"),Bn(this,yn,"f").nextSibling),Bn(this,_n,"f").addEventListener("click",this._handleClickInContainer),Bn(this,On,"f").customClick.enabled&&(Dn(this,An,document.createElement("div"),"f"),Bn(this,An,"f").className="op-ads__click-container",Bn(this,An,"f").innerHTML='<div class="op-ads__click-label">'.concat(Bn(this,On,"f").customClick.label,"</div>"),Bn(this,yn,"f").parentElement&&Bn(this,yn,"f").parentElement.insertBefore(Bn(this,An,"f"),Bn(this,yn,"f").nextSibling)),Dn(this,Rn,Bn(this,gn,"f").src,"f");var i={disabled:google.ima.ImaSdkSettings.VpaidMode.DISABLED,enabled:google.ima.ImaSdkSettings.VpaidMode.ENABLED,insecure:google.ima.ImaSdkSettings.VpaidMode.INSECURE};google.ima.settings.setVpaidMode(i[Bn(this,On,"f").vpaidMode]),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),google.ima.settings.setAutoPlayAdBreaks(Bn(this,On,"f").autoPlayAdBreaks),google.ima.settings.setNumRedirects(Bn(this,On,"f").numRedirects),google.ima.settings.setLocale(Bn(this,On,"f").language),Bn(this,On,"f").sessionId&&google.ima.settings.setSessionId(Bn(this,On,"f").sessionId),Bn(this,On,"f").publisherId&&google.ima.settings.setPpid(Bn(this,On,"f").publisherId),google.ima.settings.setPlayerType("openplayerjs"),google.ima.settings.setPlayerVersion("2.9.1"),Dn(this,Ln,new google.ima.AdDisplayContainer(Bn(this,_n,"f"),Bn(this,yn,"f"),Bn(this,An,"f")),"f"),Dn(this,kn,new google.ima.AdsLoader(Bn(this,Ln,"f")),"f"),Bn(this,kn,"f").addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this._loaded,E),Bn(this,kn,"f").addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._error,E),"undefined"!=typeof window&&window.addEventListener("resize",this._handleResizeAds,E),Bn(this,yn,"f").addEventListener("loadedmetadata",this._handleResizeAds,E),!0!==Bn(this,Tn,"f")&&!0!==Bn(this,Cn,"f")&&!0!==e&&!0!==Bn(this,On,"f").enablePreloading&&!0!==Bn(this,xn,"f")||(Bn(this,on,"f")||(Dn(this,on,!0,"f"),Bn(this,Ln,"f").initialize()),this._requestAds())}}},{key:"play",value:function(){return In(this,void 0,void 0,f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Bn(this,on,"f")){e.next=5;break}return Dn(this,xn,!0,"f"),e.next=4,this.loadPromise;case 4:return e.abrupt("return");case 5:if(Bn(this,vn,"f"))try{Bn(this,cn,"f")||!1!==Bn(this,fn,"f")?Bn(this,vn,"f").resume():Bn(this,vn,"f").start(),Dn(this,fn,!0,"f"),t=w("play"),Bn(this,yn,"f").dispatchEvent(t)}catch(e){this._resumeMedia()}case 6:case"end":return e.stop()}}),e,this)})))}},{key:"pause",value:function(){if(Bn(this,vn,"f")){Dn(this,fn,!1,"f"),Bn(this,vn,"f").pause();var e=w("pause");Bn(this,yn,"f").dispatchEvent(e)}}},{key:"destroy",value:function(){var e=this;Bn(this,vn,"f")&&(Bn(this,vn,"f").removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._error),Bn(this,bn,"f")&&Bn(this,bn,"f").forEach((function(t){Bn(e,vn,"f").removeEventListener(t,e._assign)}))),Dn(this,bn,[],"f");var t=Bn(this,mn,"f").getControls(),i=t?t.events.mouse:{};Object.keys(i).forEach((function(t){Bn(e,_n,"f")&&Bn(e,_n,"f").removeEventListener(t,i[t])})),Bn(this,kn,"f")&&(Bn(this,kn,"f").removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._error),Bn(this,kn,"f").removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this._loaded));var n=!Array.isArray(Bn(this,En,"f"))||Bn(this,Pn,"f")>Bn(this,En,"f").length;Bn(this,vn,"f")&&n&&Bn(this,vn,"f").destroy(),Bn(this,On,"f").customClick.enabled&&A(Bn(this,An,"f")),(p||v)&&Bn(this,yn,"f").removeEventListener("loadedmetadata",this._contentLoadedAction),Bn(this,yn,"f").removeEventListener("loadedmetadata",this._handleResizeAds),Bn(this,yn,"f").removeEventListener("loadedmetadata",this._loadedMetadataHandler),Bn(this,yn,"f").removeEventListener("ended",this._contentEndedListener),"undefined"!=typeof window&&window.removeEventListener("resize",this._handleResizeAds),Bn(this,_n,"f")&&Bn(this,_n,"f").removeEventListener("click",this._handleClickInContainer),A(Bn(this,_n,"f"))}},{key:"resizeAds",value:function(e,t){var i=this;if(Bn(this,vn,"f")){var n=Bn(this,yn,"f"),s="true"===n.getAttribute("data-fullscreen")?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL,a=e,r=e?e.toString():"";e&&r.indexOf("%")>-1&&Bn(this,yn,"f").parentElement&&(a=Bn(this,yn,"f").parentElement.offsetWidth*(parseInt(r,10)/100));var o,f=t,l=t?t.toString():"";t&&l.indexOf("%")>-1&&Bn(this,yn,"f").parentElement&&(f=Bn(this,yn,"f").parentElement.offsetHeight*(parseInt(l,10)/100)),o&&"undefined"!=typeof window&&window.cancelAnimationFrame(o),"undefined"!=typeof window&&(o=window.requestAnimationFrame((function(){Bn(i,vn,"f").resize(a||n.offsetWidth,f||n.offsetHeight,s)})))}}},{key:"getAdsManager",value:function(){return Bn(this,vn,"f")}},{key:"started",value:function(){return Bn(this,ln,"f")}},{key:"src",set:function(e){Dn(this,En,e,"f")}},{key:"isDone",set:function(e){Dn(this,on,e,"f")}},{key:"playRequested",set:function(e){Dn(this,xn,e,"f")}},{key:"volume",get:function(){return Bn(this,vn,"f")?Bn(this,vn,"f").getVolume():Bn(this,Sn,"f")},set:function(e){Bn(this,vn,"f")&&(Dn(this,un,e,"f"),Bn(this,vn,"f").setVolume(e),this._setMediaVolume(e),Dn(this,hn,0===e,"f"))}},{key:"muted",get:function(){return Bn(this,hn,"f")},set:function(e){Bn(this,vn,"f")&&(e?(Bn(this,vn,"f").setVolume(0),Dn(this,hn,!0,"f"),this._setMediaVolume(0)):(Bn(this,vn,"f").setVolume(Bn(this,un,"f")),Dn(this,hn,!1,"f"),this._setMediaVolume(Bn(this,un,"f"))))}},{key:"currentTime",get:function(){return Bn(this,pn,"f")},set:function(e){Dn(this,pn,e,"f")}},{key:"duration",get:function(){return Bn(this,dn,"f")}},{key:"paused",get:function(){return!Bn(this,fn,"f")}},{key:"ended",get:function(){return Bn(this,rn,"f")}},{key:"_assign",value:function(e){var t=this,i=e.getAd();switch(e.type){case google.ima.AdEvent.Type.LOADED:if(i.isLinear()){if(d&&k(Bn(this,yn,"f"))&&(Bn(this,yn,"f").controls=!1),Dn(this,dn,i.getDuration(),"f"),Dn(this,pn,i.getDuration(),"f"),!Bn(this,Nn,"f")&&!p&&!v){var n=w("waiting");Bn(this,yn,"f").dispatchEvent(n);var s=w("loadedmetadata");Bn(this,yn,"f").dispatchEvent(s),this.resizeAds()}}else this._onContentResumeRequested();break;case google.ima.AdEvent.Type.STARTED:if(i.isLinear()){Bn(this,yn,"f").parentElement&&!Bn(this,yn,"f").parentElement.classList.contains("op-ads--active")&&Bn(this,yn,"f").parentElement.classList.add("op-ads--active"),Bn(this,gn,"f").paused||Bn(this,gn,"f").pause(),Dn(this,fn,!0,"f");var a,r=w("play");if(Bn(this,yn,"f").dispatchEvent(r),a||(this.resizeAds(),a=!0),Bn(this,gn,"f").ended){Dn(this,rn,!1,"f");var o=w("adsmediaended");Bn(this,yn,"f").dispatchEvent(o)}"undefined"!=typeof window&&Dn(this,cn,window.setInterval((function(){if(!0===Bn(t,fn,"f")){Dn(t,pn,Math.round(Bn(t,vn,"f").getRemainingTime()),"f");var e=w("timeupdate");Bn(t,yn,"f").dispatchEvent(e)}}),350),"f")}break;case google.ima.AdEvent.Type.COMPLETE:case google.ima.AdEvent.Type.SKIPPED:if(i.isLinear()){if(e.type===google.ima.AdEvent.Type.SKIPPED){var f=w("adsskipped");Bn(this,yn,"f").dispatchEvent(f)}Bn(this,yn,"f").parentElement&&Bn(this,yn,"f").parentElement.classList.remove("op-ads--active"),Dn(this,fn,!1,"f"),clearInterval(Bn(this,cn,"f"))}break;case google.ima.AdEvent.Type.VOLUME_CHANGED:this._setMediaVolume(this.volume);break;case google.ima.AdEvent.Type.VOLUME_MUTED:if(i.isLinear()){var l=w("volumechange");Bn(this,yn,"f").dispatchEvent(l)}break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:if(i.isLinear()&&(Dn(this,fn,!1,"f"),Dn(this,rn,!0,"f"),Dn(this,cn,0,"f"),Dn(this,hn,!1,"f"),Dn(this,ln,!1,"f"),Dn(this,dn,0,"f"),Dn(this,pn,0,"f"),Bn(this,yn,"f").parentElement&&Bn(this,yn,"f").parentElement.classList.remove("op-ads--active"),this.destroy(),Bn(this,yn,"f").currentTime>=Bn(this,yn,"f").duration)){var c=w("ended");Bn(this,yn,"f").dispatchEvent(c)}break;case google.ima.AdEvent.Type.CLICK:var u=w("pause");Bn(this,yn,"f").dispatchEvent(u);break;case google.ima.AdEvent.Type.AD_BREAK_READY:Bn(this,On,"f").autoPlayAdBreaks||this.play()}if(e.type===google.ima.AdEvent.Type.LOG){var h=e.getAdData();if(h.adError){var m=h.adError.getMessage();console.warn("Ad warning: Non-fatal error occurred: ".concat(m));var g=w("playererror",{detail:{data:h.adError,message:m,type:"Ads"}});Bn(this,yn,"f").dispatchEvent(g)}}else{var y=w("ads".concat(e.type));Bn(this,yn,"f").dispatchEvent(y)}}},{key:"_error",value:function(e){var t,i=e.getError(),n=w("playererror",{detail:{data:i,message:i.toString(),type:"Ads"}});Bn(this,yn,"f").dispatchEvent(n);Array.isArray(Bn(this,En,"f"))&&Bn(this,En,"f").length>1&&Bn(this,Pn,"f")<Bn(this,En,"f").length-1?(Dn(this,Pn,(t=Bn(this,Pn,"f"),++t),"f"),Dn(this,xn,!0,"f"),Dn(this,ln,!0,"f"),Dn(this,on,!1,"f"),this.destroy(),this.loadedAd=!1,this.load(!0),console.warn("Ad warning: ".concat(i.toString()))):([100,101,102,300,301,302,303,400,401,402,403,405,406,407,408,409,410,500,501,502,503,900,901,1005].indexOf(i.getErrorCode())>-1?(Bn(this,vn,"f")&&Bn(this,vn,"f").destroy(),console.error("Ad error: ".concat(i.toString()))):console.warn("Ad warning: ".concat(i.toString())),!0!==Bn(this,Tn,"f")&&!0!==Bn(this,Cn,"f")&&!0!==Bn(this,ln,"f")||(Dn(this,fn,!1,"f"),this._resumeMedia()))}},{key:"_loaded",value:function(e){var t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!1,t.enablePreloading=Bn(this,On,"f").enablePreloading,Dn(this,vn,e.getAdsManager(Bn(this,yn,"f"),t),"f"),this._start(Bn(this,vn,"f")),this.loadPromise=new Promise((function(e){return e}))}},{key:"_start",value:function(e){var t=this;Bn(this,An,"f")&&e.isCustomClickTrackingUsed()&&Bn(this,An,"f").classList.add("op-ads__click-container--visible"),e.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this._onContentPauseRequested,E),e.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this._onContentResumeRequested,E),Dn(this,bn,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.VIDEO_CLICKED,google.ima.AdEvent.Type.VIDEO_ICON_CLICKED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED,google.ima.AdEvent.Type.LOG],"f"),Bn(this,On,"f").autoPlayAdBreaks||Bn(this,bn,"f").push(google.ima.AdEvent.Type.AD_BREAK_READY);var i=Bn(this,mn,"f").getControls(),n=i?i.events.mouse:{};if(Object.keys(n).forEach((function(e){Bn(t,_n,"f")&&Bn(t,_n,"f").addEventListener(e,n[e],E)})),Bn(this,bn,"f").forEach((function(i){e.addEventListener(i,t._assign,E)})),e.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._error,E),!0===Bn(this,Tn,"f")||!0===Bn(this,xn,"f")){if(Dn(this,xn,!1,"f"),!Bn(this,on,"f"))return void this._initNotDoneAds();e.init(Bn(this,yn,"f").offsetWidth,Bn(this,yn,"f").offsetHeight,Bn(this,yn,"f").parentElement&&"true"===Bn(this,yn,"f").parentElement.getAttribute("data-fullscreen")?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.start();var s=w("play");Bn(this,yn,"f").dispatchEvent(s);var a=w("playing");Bn(this,yn,"f").dispatchEvent(a)}else!0===Bn(this,On,"f").enablePreloading&&e.init(Bn(this,yn,"f").offsetWidth,Bn(this,yn,"f").offsetHeight,Bn(this,yn,"f").parentElement&&"true"===Bn(this,yn,"f").parentElement.getAttribute("data-fullscreen")?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}},{key:"_initNotDoneAds",value:function(){Dn(this,on,!0,"f"),Bn(this,Ln,"f")?(Bn(this,Ln,"f").initialize(),p||v?(Dn(this,Wn,this._contentLoadedAction,"f"),Bn(this,yn,"f").addEventListener("loadedmetadata",this._contentLoadedAction,E),Bn(this,yn,"f").load()):this._contentLoadedAction()):(this.load(),this.loadedAd=!1)}},{key:"_contentEndedListener",value:function(){Dn(this,rn,!0,"f"),Dn(this,fn,!1,"f"),Dn(this,ln,!1,"f"),Bn(this,kn,"f").contentComplete()}},{key:"_onContentPauseRequested",value:function(){Bn(this,yn,"f").removeEventListener("ended",this._contentEndedListener),Dn(this,jn,Bn(this,gn,"f").currentTime,"f"),Bn(this,ln,"f")?Bn(this,gn,"f").pause():Dn(this,ln,!0,"f");var e=w("play");Bn(this,yn,"f").dispatchEvent(e)}},{key:"_onContentResumeRequested",value:function(){var e;if(Bn(this,On,"f").loop)Array.isArray(Bn(this,En,"f"))&&(Bn(this,Pn,"f")===Bn(this,En,"f").length-1?Dn(this,Pn,0,"f"):Dn(this,Pn,(e=Bn(this,Pn,"f"),++e),"f")),this.destroy(),Bn(this,kn,"f").contentComplete(),Dn(this,xn,!0,"f"),Dn(this,ln,!0,"f"),Dn(this,on,!1,"f"),this.loadedAd=!1,this.load(!0);else if(Bn(this,yn,"f").addEventListener("ended",this._contentEndedListener,E),Bn(this,yn,"f").addEventListener("loadedmetadata",this._loadedMetadataHandler,E),p||v)Bn(this,gn,"f").src=Bn(this,Rn,"f"),Bn(this,gn,"f").load(),this._prepareMedia(),Bn(this,yn,"f").parentElement&&Bn(this,yn,"f").parentElement.classList.add("op-ads--active");else{var t=w("loadedmetadata");Bn(this,yn,"f").dispatchEvent(t)}}},{key:"_loadedMetadataHandler",value:function(){var e;Array.isArray(Bn(this,En,"f"))?(Dn(this,Pn,(e=Bn(this,Pn,"f"),++e),"f"),Bn(this,Pn,"f")<=Bn(this,En,"f").length-1?(Bn(this,vn,"f")&&Bn(this,vn,"f").destroy(),Bn(this,kn,"f").contentComplete(),Dn(this,xn,!0,"f"),Dn(this,ln,!0,"f"),Dn(this,on,!1,"f"),this._requestAds()):(Bn(this,On,"f").autoPlayAdBreaks||this._resetAdsAfterManualBreak(),this._prepareMedia())):Bn(this,yn,"f").seekable.length?Bn(this,yn,"f").seekable.end(0)>Bn(this,jn,"f")&&(Bn(this,On,"f").autoPlayAdBreaks||this._resetAdsAfterManualBreak(),this._prepareMedia()):setTimeout(this._loadedMetadataHandler,100)}},{key:"_resumeMedia",value:function(){var e=this;if(Dn(this,cn,0,"f"),Dn(this,hn,!1,"f"),Dn(this,ln,!1,"f"),Dn(this,dn,0,"f"),Dn(this,pn,0,"f"),Bn(this,yn,"f").parentElement&&Bn(this,yn,"f").parentElement.classList.remove("op-ads--active"),Bn(this,gn,"f").ended){var t=w("ended");Bn(this,yn,"f").dispatchEvent(t)}else try{Bn(this,gn,"f").play(),setTimeout((function(){var t=w("play");Bn(e,yn,"f").dispatchEvent(t)}),50)}catch(e){}}},{key:"_requestAds",value:function(){Dn(this,Mn,new google.ima.AdsRequest,"f");var e=Array.isArray(Bn(this,En,"f"))?Bn(this,En,"f")[Bn(this,Pn,"f")]:Bn(this,En,"f");!function(e){var t;if(void 0!==window.DOMParser)t=function(e){return(new window.DOMParser).parseFromString(e,"text/xml")};else{if(void 0===window.ActiveXObject||!new window.ActiveXObject("Microsoft.XMLDOM"))return!1;t=function(e){var t=new window.ActiveXObject("Microsoft.XMLDOM");return t.async=!1,t.loadXML(e),t}}try{var i=t(e);if(i.getElementsByTagName("parsererror").length>0)return!1;if(i.parseError&&0!==i.parseError.errorCode)return!1}catch(e){return!1}return!0}(e)?Bn(this,Mn,"f").adTagUrl=e:Bn(this,Mn,"f").adsResponse=e;var t=Bn(this,yn,"f").parentElement?Bn(this,yn,"f").parentElement.offsetWidth:0,i=Bn(this,yn,"f").parentElement?Bn(this,yn,"f").parentElement.offsetHeight:0;Bn(this,Mn,"f").linearAdSlotWidth=t,Bn(this,Mn,"f").linearAdSlotHeight=i,Bn(this,Mn,"f").nonLinearAdSlotWidth=t,Bn(this,Mn,"f").nonLinearAdSlotHeight=i/3,Bn(this,Mn,"f").setAdWillAutoPlay(Bn(this,Tn,"f")),Bn(this,Mn,"f").setAdWillPlayMuted(Bn(this,Cn,"f")),Bn(this,kn,"f").requestAds(Bn(this,Mn,"f"))}},{key:"_contentLoadedAction",value:function(){Bn(this,Wn,"f")&&(Bn(this,yn,"f").removeEventListener("loadedmetadata",Bn(this,Wn,"f")),Dn(this,Wn,null,"f")),this._requestAds()}},{key:"_resetAdsAfterManualBreak",value:function(){Bn(this,vn,"f")&&Bn(this,vn,"f").destroy(),Bn(this,kn,"f").contentComplete(),Dn(this,on,!1,"f"),Dn(this,xn,!0,"f")}},{key:"_prepareMedia",value:function(){Bn(this,gn,"f").currentTime=Bn(this,jn,"f"),Bn(this,yn,"f").removeEventListener("loadedmetadata",this._loadedMetadataHandler),this._resumeMedia()}},{key:"_setMediaVolume",value:function(e){Bn(this,gn,"f").volume=e,Bn(this,gn,"f").muted=0===e}},{key:"_handleClickInContainer",value:function(){if(Bn(this,gn,"f").paused){var e=w("paused");Bn(this,yn,"f").dispatchEvent(e),this.pause()}}},{key:"_handleResizeAds",value:function(){this.resizeAds()}}]),e}();rn=new WeakMap,on=new WeakMap,fn=new WeakMap,ln=new WeakMap,cn=new WeakMap,un=new WeakMap,hn=new WeakMap,dn=new WeakMap,pn=new WeakMap,vn=new WeakMap,mn=new WeakMap,gn=new WeakMap,yn=new WeakMap,bn=new WeakMap,En=new WeakMap,wn=new WeakMap,kn=new WeakMap,_n=new WeakMap,An=new WeakMap,Ln=new WeakMap,Mn=new WeakMap,Tn=new WeakMap,Cn=new WeakMap,xn=new WeakMap,On=new WeakMap,Pn=new WeakMap,Sn=new WeakMap,Wn=new WeakMap,jn=new WeakMap,Rn=new WeakMap,Nn=new WeakMap;const qn=Fn;var Hn,zn,Vn,Un,Kn,Gn,Xn,Qn,$n,Jn,Yn,Zn,es,ts,is,ns,ss=function(e,t,i,n){return new(i||(i=Promise))((function(s,a){function r(e){try{f(n.next(e))}catch(e){a(e)}}function o(e){try{f(n.throw(e))}catch(e){a(e)}}function f(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,o)}f((n=n.apply(e,t||[])).next())}))},as=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},rs=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},os=function(){function e(t,i){return s()(this,e),Hn.set(this,void 0),zn.set(this,void 0),this.proxy=null,Vn.set(this,""),Un.set(this,void 0),Kn.set(this,void 0),Gn.set(this,void 0),Xn.set(this,{}),Qn.set(this,!1),$n.set(this,void 0),Jn.set(this,!1),Yn.set(this,!1),Zn.set(this,!1),es.set(this,{}),ts.set(this,[]),is.set(this,void 0),ns.set(this,{controls:{alwaysVisible:!1,layers:{left:["play","time","volume"],middle:["progress"],right:["captions","settings","fullscreen"]}},defaultLevel:null,detachMenus:!1,forceNative:!0,height:0,hidePlayBtnTimer:350,labels:{auto:"Auto",captions:"CC/Subtitles",click:"Click to unmute",fullscreen:"Fullscreen",lang:{en:"English"},levels:"Quality Levels",live:"Live Broadcast",mediaLevels:"Change Quality",mute:"Mute",off:"Off",pause:"Pause",play:"Play",progressRail:"Time Rail",progressSlider:"Time Slider",settings:"Player Settings",speed:"Speed",speedNormal:"Normal",tap:"Tap to unmute",toggleCaptions:"Toggle Captions",unmute:"Unmute",volume:"Volume",volumeControl:"Volume Control",volumeSlider:"Volume Slider"},live:{showLabel:!0,showProgress:!1},mode:"responsive",onError:function(e){return console.error(e)},pauseOthers:!0,progress:{duration:0,showCurrentTimeOnly:!1},showLoaderOnInit:!1,startTime:0,startVolume:1,step:0,width:0}),as(this,Un,t instanceof HTMLMediaElement?t:document.getElementById(t),"f"),rs(this,Un,"f")&&(as(this,Qn,rs(this,Un,"f").autoplay||!1,"f"),"string"==typeof i||Array.isArray(i)||this._mergeOptions(i),rs(this,Un,"f").volume=rs(this,es,"f").startVolume||1,rs(this,es,"f").ads&&rs(this,es,"f").ads.src&&as(this,Kn,rs(this,es,"f").ads.src,"f"),rs(this,es,"f").startTime>0&&(rs(this,Un,"f").currentTime=rs(this,es,"f").startTime),as(this,$n,rs(this,Un,"f").volume,"f")),this._autoplay=this._autoplay.bind(this),this._enableKeyBindings=this._enableKeyBindings.bind(this),this}return r()(e,[{key:"init",value:function(){return ss(this,void 0,void 0,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._isValid()){t.next=9;break}return this._wrapInstance(),t.next=4,this._prepareMedia();case 4:this._createPlayButton(),this._createUID(),this._createControls(),this._setEvents(),e.instances[this.id]=this;case 9:case"end":return t.stop()}}),t,this)})))}},{key:"load",value:function(){return rs(this,Gn,"f").loaded=!1,this.isMedia()?rs(this,Gn,"f").load():void 0}},{key:"play",value:function(){return ss(this,void 0,void 0,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!rs(this,Gn,"f")||rs(this,Gn,"f").loaded){e.next=4;break}return e.next=3,rs(this,Gn,"f").load();case 3:rs(this,Gn,"f").loaded=!0;case 4:if(!rs(this,zn,"f")){e.next=8;break}return e.next=7,rs(this,zn,"f").loadPromise;case 7:return e.abrupt("return",rs(this,zn,"f").play());case 8:return e.abrupt("return",rs(this,Gn,"f").play());case 9:case"end":return e.stop()}}),e,this)})))}},{key:"pause",value:function(){rs(this,zn,"f")?rs(this,zn,"f").pause():rs(this,Gn,"f").pause()}},{key:"destroy",value:function(){var t=this;rs(this,zn,"f")&&(rs(this,zn,"f").pause(),rs(this,zn,"f").destroy()),rs(this,is,"f")&&rs(this,is,"f").destroy();var i=rs(this,Un,"f");rs(this,Gn,"f")&&rs(this,Gn,"f").destroy(),Object.keys(rs(this,Xn,"f")).forEach((function(e){i.removeEventListener(e,rs(t,Xn,"f")[e])})),this.getContainer().removeEventListener("keydown",this._enableKeyBindings),rs(this,Qn,"f")&&!rs(this,Zn,"f")&&k(rs(this,Un,"f"))&&i.removeEventListener("canplay",this._autoplay),rs(this,Hn,"f")&&rs(this,Hn,"f").destroy(),k(rs(this,Un,"f"))&&(A(this.playBtn),A(this.loader)),rs(this,Un,"f").removeEventListener("playererror",rs(this,es,"f").onError),i.controls=!0,i.setAttribute("id",rs(this,Vn,"f")),i.removeAttribute("op-live__enabled"),i.removeAttribute("op-dvr__enabled");var n="fit"!==rs(this,es,"f").mode||_(i)?i.parentElement:i.closest(".op-player__fit--wrapper");n&&n.parentNode&&n.parentNode.replaceChild(i,n),delete e.instances[rs(this,Vn,"f")];var s=w("playerdestroyed");i.dispatchEvent(s)}},{key:"getContainer",value:function(){return rs(this,Un,"f").parentElement||rs(this,Un,"f")}},{key:"getControls",value:function(){return rs(this,Hn,"f")}},{key:"getCustomControls",value:function(){return rs(this,ts,"f")}},{key:"getElement",value:function(){return rs(this,Un,"f")}},{key:"getEvents",value:function(){return rs(this,Xn,"f")}},{key:"getOptions",value:function(){return rs(this,es,"f")}},{key:"activeElement",value:function(){return rs(this,zn,"f")&&rs(this,zn,"f").started()?rs(this,zn,"f"):rs(this,Gn,"f")}},{key:"isMedia",value:function(){return this.activeElement()instanceof an}},{key:"isAd",value:function(){return this.activeElement()instanceof qn}},{key:"getMedia",value:function(){return rs(this,Gn,"f")}},{key:"getAd",value:function(){return rs(this,zn,"f")}},{key:"addCaptions",value:function(e){if(e.default)for(var t=rs(this,Un,"f").querySelectorAll("track"),i=0,n=t.length;i<n;i++)t[i].default=!1;var s=rs(this,Un,"f"),a=s.querySelector('track[srclang="'.concat(e.srclang,'"][kind="').concat(e.kind,'"]'));a?(a.src=e.src,a.label=e.label,a.default=e.default||!1):((a=document.createElement("track")).srclang=e.srclang,a.src=e.src,a.kind=e.kind,a.label=e.label,a.default=e.default||!1,s.appendChild(a));var r=w("controlschanged");s.dispatchEvent(r)}},{key:"addControl",value:function(e){e.custom=!0,rs(this,ts,"f").push(e);var t=w("controlschanged");rs(this,Un,"f").dispatchEvent(t)}},{key:"removeControl",value:function(e){var t=this,i=this.getOptions().controls.layers;Object.keys(i).forEach((function(t){i[t].forEach((function(n,s){n===e&&i[t].splice(s,1)}))})),rs(this,ts,"f").forEach((function(i,n){i.id===e&&rs(t,ts,"f").splice(n,1)}));var n=w("controlschanged");rs(this,Un,"f").dispatchEvent(n)}},{key:"_prepareMedia",value:function(){return ss(this,void 0,void 0,f().mark((function t(){var i,n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,rs(this,Un,"f").addEventListener("playererror",rs(this,es,"f").onError,E),rs(this,Qn,"f")&&k(rs(this,Un,"f"))&&rs(this,Un,"f").addEventListener("canplay",this._autoplay,E),as(this,Gn,new an(rs(this,Un,"f"),rs(this,es,"f"),rs(this,Qn,"f"),e.customMedia),"f"),i=rs(this,Un,"f").getAttribute("preload"),!rs(this,Kn,"f")&&i&&"none"===i){t.next=9;break}return t.next=8,rs(this,Gn,"f").load();case 8:rs(this,Gn,"f").loaded=!0;case 9:!rs(this,Qn,"f")&&rs(this,Kn,"f")&&(n=rs(this,es,"f")&&rs(this,es,"f").ads?rs(this,es,"f").ads:void 0,as(this,zn,new qn(this,rs(this,Kn,"f"),!1,!1,n),"f")),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.error(t.t0);case 15:case"end":return t.stop()}}),t,this,[[0,12]])})))}},{key:"enableDefaultPlayer",value:function(){var e=this,t=!0,i=0;this.proxy&&!this.proxy.paused&&(t=!1,i=this.proxy.currentTime,this.proxy.pause()),this.proxy=this,this.getElement().addEventListener("loadedmetadata",(function(){e.getMedia().currentTime=i,t||e.play()}))}},{key:"loadAd",value:function(e){return ss(this,void 0,void 0,f().mark((function t(){var i,n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.isAd()?(this.activeElement().destroy(),this.activeElement().src=e,this.getAd().isDone=!1,this.activeElement().paused||(this.getAd().playRequested=!0),this.activeElement().load(!0)):(i=rs(this,es,"f")&&rs(this,es,"f").ads?rs(this,es,"f").ads:void 0,n=!this.activeElement().paused||rs(this,Jn,"f"),as(this,zn,new qn(this,e,n,rs(this,Yn,"f"),i),"f")),t.next=4,rs(this,zn,"f").loadPromise;case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"src",get:function(){return rs(this,Gn,"f").src},set:function(e){var i=this;rs(this,Gn,"f")instanceof an?(rs(this,Gn,"f").mediaFiles=[],rs(this,Gn,"f").src=e):"string"==typeof e?rs(this,Un,"f").src=e:Array.isArray(e)?e.forEach((function(e){var t=document.createElement("source");t.src=e.src,t.type=e.type||he(e.src,rs(i,Un,"f")),rs(i,Un,"f").appendChild(t)})):"object"===t()(e)&&(rs(this,Un,"f").src=e.src)}},{key:"id",get:function(){return rs(this,Vn,"f")}},{key:"_isValid",value:function(){var e=rs(this,Un,"f");return e instanceof HTMLElement!=!1&&(!(!_(e)&&!k(e))&&!!e.classList.contains("op-player__media"))}},{key:"_wrapInstance",value:function(){var e=document.createElement("div");e.className="op-player op-player__keyboard--inactive",e.className+=_(rs(this,Un,"f"))?" op-player__audio":" op-player__video",e.tabIndex=0,rs(this,Un,"f").classList.remove("op-player"),rs(this,Un,"f").parentElement&&rs(this,Un,"f").parentElement.insertBefore(e,rs(this,Un,"f")),e.appendChild(rs(this,Un,"f"));var t=document.createElement("div");if(t.className="op-status",t.innerHTML="<span></span>",t.tabIndex=-1,t.setAttribute("aria-hidden","true"),k(rs(this,Un,"f"))&&rs(this,Un,"f").parentElement&&rs(this,Un,"f").parentElement.insertBefore(t,rs(this,Un,"f")),e.addEventListener("keydown",(function(){e.classList.contains("op-player__keyboard--inactive")&&e.classList.remove("op-player__keyboard--inactive")}),E),e.addEventListener("click",(function(){e.classList.contains("op-player__keyboard--inactive")||e.classList.add("op-player__keyboard--inactive")}),E),"fill"!==rs(this,es,"f").mode||_(rs(this,Un,"f"))||d)if("fit"!==rs(this,es,"f").mode||_(rs(this,Un,"f"))){var i="";if(rs(this,es,"f").width){var n="number"==typeof rs(this,es,"f").width?"".concat(rs(this,es,"f").width,"px"):rs(this,es,"f").width;i+="width: ".concat(n," !important;")}if(rs(this,es,"f").height){var s="number"==typeof rs(this,es,"f").height?"".concat(rs(this,es,"f").height,"px"):rs(this,es,"f").height;i+="height: ".concat(s," !important;")}i&&e.setAttribute("style",i)}else{var a=this.getContainer();if(a.parentElement){var r=document.createElement("div");r.className="op-player__fit--wrapper",r.tabIndex=0,a.parentElement.insertBefore(r,a),r.appendChild(a),a.classList.add("op-player__fit")}}else this.getContainer().classList.add("op-player__full")}},{key:"_createControls",value:function(){d&&k(rs(this,Un,"f"))&&this.getContainer().classList.add("op-player__ios--iphone"),as(this,Hn,new Gt(this),"f"),rs(this,Hn,"f").create()}},{key:"_createUID",value:function(){if(rs(this,Un,"f").id)as(this,Vn,rs(this,Un,"f").id,"f"),rs(this,Un,"f").removeAttribute("id");else{var t;do{t="op_".concat(Math.random().toString(36).substr(2,9))}while(void 0!==e.instances[t]);as(this,Vn,t,"f")}rs(this,Un,"f").parentElement&&(rs(this,Un,"f").parentElement.id=rs(this,Vn,"f"))}},{key:"_createPlayButton",value:function(){var e=this;_(rs(this,Un,"f"))||(this.playBtn=document.createElement("button"),this.playBtn.className="op-player__play",this.playBtn.tabIndex=0,this.playBtn.title=rs(this,es,"f").labels.play,this.playBtn.innerHTML="<span>".concat(rs(this,es,"f").labels.play,"</span>"),this.playBtn.setAttribute("aria-pressed","false"),this.playBtn.setAttribute("aria-hidden","false"),this.loader=document.createElement("span"),this.loader.className="op-player__loader",this.loader.tabIndex=-1,this.loader.setAttribute("aria-hidden","true"),rs(this,Un,"f").parentElement&&(rs(this,Un,"f").parentElement.insertBefore(this.loader,rs(this,Un,"f")),rs(this,Un,"f").parentElement.insertBefore(this.playBtn,rs(this,Un,"f"))),this.playBtn.addEventListener("click",(function(){rs(e,zn,"f")&&(rs(e,zn,"f").playRequested=e.activeElement().paused),e.activeElement().paused?e.activeElement().play():e.activeElement().pause()}),E))}},{key:"_setEvents",value:function(){var e=this;k(rs(this,Un,"f"))&&(rs(this,Xn,"f").loadedmetadata=function(){var t=e.activeElement();!rs(e,es,"f").showLoaderOnInit||p||v?(e.loader.setAttribute("aria-hidden","true"),e.playBtn.setAttribute("aria-hidden","false")):(e.loader.setAttribute("aria-hidden","false"),e.playBtn.setAttribute("aria-hidden","true")),t.paused&&(e.playBtn.classList.remove("op-player__play--paused"),e.playBtn.setAttribute("aria-pressed","false"))},rs(this,Xn,"f").waiting=function(){e.playBtn.setAttribute("aria-hidden","true"),e.loader.setAttribute("aria-hidden","false")},rs(this,Xn,"f").seeking=function(){var t=e.activeElement();e.playBtn.setAttribute("aria-hidden","true"),e.loader.setAttribute("aria-hidden",t instanceof an?"false":"true")},rs(this,Xn,"f").seeked=function(){var t=e.activeElement();0===Math.round(t.currentTime)?(e.playBtn.setAttribute("aria-hidden","true"),e.loader.setAttribute("aria-hidden","false")):(e.playBtn.setAttribute("aria-hidden",t instanceof an?"false":"true"),e.loader.setAttribute("aria-hidden","true"))},rs(this,Xn,"f").play=function(){e.playBtn.classList.add("op-player__play--paused"),e.playBtn.title=rs(e,es,"f").labels.pause,e.loader.setAttribute("aria-hidden","true"),rs(e,es,"f").showLoaderOnInit?e.playBtn.setAttribute("aria-hidden","true"):setTimeout((function(){e.playBtn.setAttribute("aria-hidden","true")}),rs(e,es,"f").hidePlayBtnTimer)},rs(this,Xn,"f").playing=function(){e.loader.setAttribute("aria-hidden","true"),e.playBtn.setAttribute("aria-hidden","true")},rs(this,Xn,"f").pause=function(){var t=e.activeElement();e.playBtn.classList.remove("op-player__play--paused"),e.playBtn.title=rs(e,es,"f").labels.play,rs(e,es,"f").showLoaderOnInit&&0===Math.round(t.currentTime)?(e.playBtn.setAttribute("aria-hidden","true"),e.loader.setAttribute("aria-hidden","false")):(e.playBtn.setAttribute("aria-hidden","false"),e.loader.setAttribute("aria-hidden","true"))},rs(this,Xn,"f").ended=function(){e.loader.setAttribute("aria-hidden","true"),e.playBtn.setAttribute("aria-hidden","true")}),Object.keys(rs(this,Xn,"f")).forEach((function(t){rs(e,Un,"f").addEventListener(t,rs(e,Xn,"f")[t],E)})),this.getContainer().addEventListener("keydown",this._enableKeyBindings,E)}},{key:"_autoplay",value:function(){var e,t,i,n,s,a,r=this;rs(this,Zn,"f")||(as(this,Zn,!0,"f"),rs(this,Un,"f").removeEventListener("canplay",this._autoplay),e=rs(this,Un,"f"),t=rs(this,$n,"f"),i=function(e){as(r,Jn,e,"f")},n=function(e){as(r,Yn,e,"f")},s=function(){if(rs(r,Yn,"f")){r.activeElement().muted=!0,r.activeElement().volume=0;var e=w("volumechange");rs(r,Un,"f").dispatchEvent(e);var t=document.createElement("div"),i=p||v?rs(r,es,"f").labels.tap:rs(r,es,"f").labels.click;t.className="op-player__unmute",t.innerHTML="<span>".concat(i,"</span>"),t.tabIndex=0,t.addEventListener("click",(function(){r.activeElement().muted=!1,r.activeElement().volume=rs(r,$n,"f");var e=w("volumechange");rs(r,Un,"f").dispatchEvent(e),A(t)}),E);var n=r.getContainer();n.insertBefore(t,n.firstChild)}else r.activeElement().muted=rs(r,Un,"f").muted,r.activeElement().volume=rs(r,$n,"f");if(rs(r,Kn,"f")){var s=rs(r,es,"f")&&rs(r,es,"f").ads?rs(r,es,"f").ads:void 0;as(r,zn,new qn(r,rs(r,Kn,"f"),rs(r,Jn,"f"),rs(r,Yn,"f"),s),"f")}else(rs(r,Jn,"f")||rs(r,Yn,"f"))&&r.play()},void 0!==(a=e.play())?a.then((function(){return e.pause(),i(!0),n(!1),s()})).catch((function(){e.volume=0,e.muted=!0,e.play().then((function(){return e.pause(),i(!0),n(!0),s()})).catch((function(){e.volume=t,e.muted=!1,i(!1),n(!1),s()}))})):(i(!e.paused||"Promise"in window&&a instanceof Promise),e.pause(),n(!1),s()))}},{key:"_mergeOptions",value:function(e){var t=this;if(as(this,es,Object.assign(Object.assign({},rs(this,ns,"f")),e),"f"),e){["labels","controls"].forEach((function(i){rs(t,es,"f")[i]=e[i]&&Object.keys(e[i]).length?Object.assign(Object.assign({},rs(t,ns,"f")[i]),e[i]):rs(t,ns,"f")[i]}))}}},{key:"_enableKeyBindings",value:function(e){var t,i=e.which||e.keyCode||0,n=this.activeElement(),s=this.isAd(),a=null===(t=null===document||void 0===document?void 0:document.activeElement)||void 0===t?void 0:t.classList.contains("op-player");switch(i){case 13:case 32:case 75:!a||13!==i&&32!==i?75===i&&(n.paused?n.play():n.pause()):n.paused?n.play():n.pause(),e.preventDefault(),e.stopPropagation();break;case 35:s||n.duration===1/0||(n.currentTime=n.duration,e.preventDefault(),e.stopPropagation());break;case 36:s||(n.currentTime=0,e.preventDefault(),e.stopPropagation());break;case 37:case 39:case 74:case 76:if(!s&&n.duration!==1/0){var r=5,o=this.getOptions().step;o?r=74===i||76===i?2*o:o:74!==i&&76!==i||(r=10);var f=n.duration!==1/0?r:this.getOptions().progress.duration;n.currentTime+=37===i||74===i?-1*f:f,n.currentTime<0?n.currentTime=0:n.currentTime>=n.duration&&(n.currentTime=n.duration),e.preventDefault(),e.stopPropagation()}break;case 38:case 40:var l=38===i?Math.min(n.volume+.1,1):Math.max(n.volume-.1,0);n.volume=l,n.muted=!(l>0),e.preventDefault(),e.stopPropagation();break;case 70:k(rs(this,Un,"f"))&&!e.ctrlKey&&(as(this,is,new fe(this,"",""),"f"),void 0!==rs(this,is,"f").fullScreenEnabled&&(rs(this,is,"f").toggleFullscreen(),e.preventDefault(),e.stopPropagation()));break;case 77:n.muted=!n.muted,n.muted?n.volume=0:n.volume=rs(this,$n,"f"),e.preventDefault(),e.stopPropagation();break;case 188:case 190:if(!s&&e.shiftKey){var c=n;c.playbackRate=188===i?Math.max(c.playbackRate-.25,.25):Math.min(c.playbackRate+.25,2);var u=this.getContainer().querySelector(".op-status>span");u&&(u.textContent="".concat(c.playbackRate,"x"),u.parentElement&&u.parentElement.setAttribute("aria-hidden","false"),setTimeout((function(){u.parentElement&&u.parentElement.setAttribute("aria-hidden","true")}),500));var h=w("controlschanged");dispatchEvent(h),e.preventDefault(),e.stopPropagation()}else!s&&n.paused&&(n.currentTime+=.04*(188===i?-1:1),e.preventDefault(),e.stopPropagation())}}}],[{key:"init",value:function(){e.instances={};for(var t=document.querySelectorAll("video.op-player, audio.op-player"),i=0,n=t.length;i<n;i++){var s=t[i],a=s.getAttribute("data-op-settings");new e(s,a?JSON.parse(a):{}).init()}}},{key:"addMedia",value:function(t,i,n,s){e.customMedia.media[i]=s,e.customMedia.optionsKey[i]=t,e.customMedia.rules.push(n)}}]),e}();Hn=new WeakMap,zn=new WeakMap,Vn=new WeakMap,Un=new WeakMap,Kn=new WeakMap,Gn=new WeakMap,Xn=new WeakMap,Qn=new WeakMap,$n=new WeakMap,Jn=new WeakMap,Yn=new WeakMap,Zn=new WeakMap,es=new WeakMap,ts=new WeakMap,is=new WeakMap,ns=new WeakMap,os.instances={},os.customMedia={media:{},optionsKey:{},rules:[]};const fs=os;"undefined"!=typeof window&&(window.OpenPlayer=os,window.OpenPlayerJS=os,os.init())})(),n=n.default})()}));